#-----------------------------------------------------------------------------------------
##########################################################################################
############################### USER DEFINED PARAMETERS ##################################
##########################################################################################


#-----------------------------------------------------------------------------------------
## DOMAIN NAME inputs
## Below properties are for Domain names to be mapped with Azure App Gateways
## Enter unique and unused domain names for each of the below domain name properties

# This is domain name property used for Foundry Console and Identity components
# This is not required if shared cluster is already created in previous installations
# Domain name must consist of lower case alphanumeric characters, '-' or '.' and must start and end with an alphanumeric character
SHARED_SERVER_DOMAIN_NAME = foundryshared.dev-hcl-cloud.net

# This is domain name property for Foundry Integration component
# Domain name must consist of lower case alphanumeric characters, '-' or '.' and must start and end with an alphanumeric character
INTEGRATION_SERVER_DOMAIN_NAME = foundryint.dev-hcl-cloud.net

# This is for Foundry Engagement... not required for Production installation. For Production it will be same as SHARED_SERVER_DOMAIN_NAME
# Domain name must consist of lower case alphanumeric characters, '-' or '.' and must start and end with an alphanumeric character
VMS_DOMAIN_NAME = foundryvms.dev-hcl-cloud.net

#-----------------------------------------------------------------------------------------
## Azure related inputs
#subscription ID is a GUID that uniquely identifies your subscription to use Azure services
AZURE_SUBSCRIPTION_ID = 2b2e8a57-7ba4-40ba-abb1-03b7b4bc85f4

#Location for creating the azure resources... ex: eastus
AZURE_LOCATION = eastus

#Application needs service principal to access  or configure resources through Azure Resource Manager in Azure Stack.
# Refer documentation for steps to get values for these inputs on the azure portal
SERVICE_PRINCIPAL_CLIENT_ID = a5aec738-547c-498c-aa5f-e272007cfd1e
SERVICE_PRINCIPAL_CLIENT_SECRET = cc9ab9da-fa8a-44cc-af82-5059293d0da7
SERVICE_PRINCIPAL_OBJECT_ID = b4afcb93-56ed-41c4-98e0-7bb639298f84
TENANT_ID = b1b1f617-9b00-4e81-8190-c4a5136aa995

#-----------------------------------------------------------------------------------------
# SSH Public Key is required for Azure Cluster creation
# Use an SSH Key which has no passphrase to avoid user intervention during installation.
# Note: Use the same SSH Key for all Non-Production installations within a subscription.
# Refer documentation for further details.
SSH_PUBLIC_KEY =  ssh-rsa AAAABAAAADAQABAAABAQDQ7AylTzDw8RdtDVyrVSYjPWMVhTcy3g19Ozgdr1fAhIUDkWPtB89E0icls2CMnZFOXPm6RxmFZ74HpQDJnKaXoietOk9NQHMD0ADaONUyOBRwngb7aWJt1/OjM/JAZz8saH1Mg7tatl99K6NvsTs98Zb7QgPxh7q5JtO5JxRrrehuhRa/+S6k/fiBh5F0JHmA6rv4tLJ9AFd1WiOU+azkBlLlvuTi0sEY/nNPiiJDkkQ+2CdUYQCwg87dT2TIlymXQlWJFBa0LXXV4diSVRT1ikSeEWJK2VsjuMFGvmsKM5XL user@cc-c40e-52e2c5a7-3997467220-29ckj

#-----------------------------------------------------------------------------------------

## Azure Kubernetes Service inputs
# Please enter a new unused resource group names for the below properties
# resource group where shared cluster would be created for foundry components such as console and identity
# This is not required if shared cluster is already created in previous installations
SHARED_AZURE_RESOURCE_GROUP = FoundryShared

# resource group where integration cluster would be created
INTEGRATION_AZURE_RESOURCE_GROUP = FoundryInt

#-----------------------------------------------------------------------------------------
## Azure DB service params
# Currently supported datatypes are mysql,sqlserver.
DATABASE_TYPE = mysql

# This is not required if shared cluster is already created in previous installations
SHARED_DATABASE_USER_NAME = dbclient

# This is not required if shared cluster is already created in previous installations
# Currently due to linux shell issues $, *, &, !, (, ), \ characters are not supported in password
SHARED_DATABASE_PASSWORD = Root@123

INTEGRATION_DATABASE_USER_NAME = dbclient

# Currently due to linux shell issues $, *, &, !, (, ), \ characters are not supported in password
INTEGRATION_DATABASE_PASSWORD = Root@123


#-----------------------------------------------------------------------------------------
# Password for the .pfx ssl cert
APPGATEWAY_SSL_CERT_PASSWORD = Azure123456!


#-------------------------------------------------------------------------------
## Foundry Auto Registration details
# For Non-Production, these are not required if shared cluster is already created in previous installations
# User id should be in the format of mail id
AUTO_REGISTRATION_USER_ID = user@voltmx.com

# Password should contain atleast 8 characters, one uppercase letter and one special character
AUTO_REGISTRATION_PASSWORD = Password@1

AUTO_REGISTRATION_FIRST_NAME = user

AUTO_REGISTRATION_LAST_NAME = user

#-------------------------------------------------------------------------------
#Enter unique value to attach as tag to each resource
CUSTOM_TAG = voltmx-foundry

#-------------------------------------------------------------------------------
# Enter true to enable CDN / false to disable
# If set to true, CDN will be created for integration
AZURE_CDN_ENABLED = true


#-------------------------------------------------------------------------------
## Alerts Configuration
# Enable notification of alerts for azure cloud, if alerts notification is not required, set the value to false
ALERT_NOTIFICATION_ENABLED = true

# Customize the group name if required
AZURE_ACTION_GROUP_NAME = admin

# User email ids for alert notification.
# If alert notification is enabled, make sure to provide the primary email id for notification
# To add secondary email ids, please configure it in azure portal
USER_EMAIL_ID = mymail@gmail.com

#-------------------------------------------------------------------------------
## Azure File Share Configuration
# Enter the outbound public IP of the machine where this installation script runs. 
# Enter ips in quotes Eg:array_to_whitelist_ips_to_access_file_share = ("w1.x1.y1.z1" "w2.x2.y2.z2" "w3.x3.y3.z3")
ARRAY_TO_WHITELIST_IPS_TO_ACCESS_FILE_SHARE = ("103.140.124.130")


#-------------------------------------------------------------------------------	
### PCI installation requirements ###	
# Resource group under which PCI related function app gets created. Please specify a new resource group for Production if Non-Production foundry is also installed on the same subscription.
COMMON_RESOURCE_GROUP = HCLInfra

#-------------------------------------------------------------------------------
## Marketing Catalog Microservice inputs
# Specify whether to enable Marketing Catalog Microservice or not(true/false)
MARKETING_CATALOG_MS = true

# Resource group where Marketing catalog microservice resources would be created
MARKETING_CATALOG_RESOURCE_GROUP = marketingcatalog-ms

# Enter the path of Mongo Shell [e.g /mongodb/bin]
MONGO_PATH = /opt/mongodb-linux-x86_64-ubuntu1804-4.2.10/bin

# Enter the connection string for Mongo Shell from Altas [e.g mongodb+srv://infinity.4o1ua.azure.mongodb.net]"
MONGO_CONNECTION = mongodb+srv://mongo-cluster-1.jonig.mongodb.net

# Enter the mongo database user name
MONGO_USER_NAME = mongodbuser

# Enter the mongo database user password
# Currently due to linux shell issues $, *, &, !, (, ), \ characters are not supported in password
MONGO_PASSWORD = Root@123

# Enter the database name
MONGODB_DBNAME = marketingcatalogdb

# Enter the connection string. Ensure that you are providing URL encoded mongodb username and password values if they contain special characters like *,@,:,?,. etc.
MONGODB_CONNECTIONSTR = mongodb://mongodbuser:Root%40123@mongo-cluster-1-shard-00-01.jonig.mongodb.net:27017,mongo-cluster-1-shard-00-02.jonig.mongodb.net:27017,mongo-cluster-1-shard-00-00.jonig.mongodb.net:27017/marketingcatalogdb?ssl=true&replicaSet=atlas-qxcm8s-shard-0&authSource=admin&retryWrites=true&w=majority

# Enter the Event hub namespace
EVENT_HUB_NAME_SPACE = marketingcatalogkafkaapp

#-------------------------------------------------------------------------------	
## Campaign Microservice inputs
# Specify whether to enable Campaign Microservice or not(true/false)
CAMPAIGN_MS = true

# Resource group where campaign microservice resources would be created
CAMPAIGN_RESOURCE_GROUP = nas-ssl-campaign

# Server name for MySQL Database
CAMPAIGN_DB_SERVER_NAME=sqlcampaigndb

# Username for MySQL Database
CAMPAIGN_DB_USER_NAME=campaign


# Currently due to linux shell issues $, *, &, !, (, ), \ characters are not supported in password
CAMPAIGN_DB_PASSWORD = root@1234

# Specify the outbound public IP of the machine where the installation script would be running. To specify multiple IPs use space separated values.
ARRAY_TO_WHITELIST_IPS_TO_ACCESS_CAMPAIGN_DB = ("103.140.124.130")

#For Internal use only
CAMPAIGN_DATABASE_HOST=


#-------------------------------------------------------------------------------
## New Relic Monitoring details

# New Relic Monitoring for AKS Cluster
# Enable New Relic monitoring for Infrastructure monitoring. Make sure proper new relic subscription is available before enabling this 
# feature.(true/false)
NEW_RELIC_INFRA_MONITORING_ENABLED = true

# Enable New Relic monitoring for Application performance monitoring. Make sure proper new relic subscription is available before enabling 
# this feature.(true/false)
NEW_RELIC_APP_PERF_MONITORING_ENABLED = true

# New Relic license key. Provide valid license key if proper subscription(infra monitoring/Application performance monitoring is available
NEW_RELIC_LICENSE_KEY = 4c5f9010fb39c130a75c407ab0b4ba153f55NRAK


#-----------------------------------------------------------------------------------------
## Azure Kubernetes Service inputs

#Number of worker nodes in cluster
AKS_NODE_COUNT= 2

# Maximum number of worker nodes in cluster( If cluster is scaled due to increase in load)
AKS_MAX_NODE_COUNT= 6

# Worker node type in SHARED cluster(Make sure worker node contains atleast 16GB Memory and 4 vCPUs)
SHARED_AKS_NODE_SIZE_NON_PROD=Standard_D4_v3

SHARED_AKS_NODE_SIZE_PROD=Standard_D4_v3

# Worker node type in INTEGRATION cluster(Make sure it has atleast 8GB memory and 2 vCPUs)
INTEGRATION_AKS_NODE_SIZE=Standard_B2MS

# AKS master node count
AKS_MASTER_NODE_COUNT= 1  

INTEGRATION_AKS_NODE_COUNT=2

INTEGRATION_AKS_MAX_NODE_COUNT=6

#AKS API server access can be restricted to specific IPs.Default value is set to true.Enter false to allow complete access.
RESTRICT_API_SERVER_ACCESS= true

#Enter IPs to provide access to AKS API server.
#Ingnore if RESTRICT_API_SERVER_ACCESS is set to false
#Enter space seperated IPs or CIDR ranges in quotes
#Eg:AUTHORISED_IPS_TO_ACCCESS_AKS_API_SERVER = ("w1.x1.y1.z1" "w2.x2.y2.z2" "w3.x3.y3.z3/x" "w4.x4.y4.z4/y")
AUTHORISED_IPS_TO_ACCCESS_AKS_API_SERVER= ("103.140.124.130")

#-------------------------------------------------------------------------------
################################################################################
##################### ADVANCED PROPERTIES ######################################
############### PLEASE EDIT ONLY IF REQUIRED ###################################
################################################################################

# Kubernetes version to be installed
# Please check the current versions supported by AKS in the required region before installing
# For ex: az aks get-versions --location eastus
K8S_VERSION = 1.17.7

#Specify whether to Enable Multiple Availability zone deployment for AKS(true/false)
AKS_MULTI_AZ_ENABLED = true


#-----------------------------------------------------------------------------------------
##Azure VNet and subnet params

#Virtual Network name
SHARED_AKS_VNET_NAME = aks-vnet

#Virtual Network Address range
# Shared Cluster Vnet address space
VNET_ADDRESS_SPACE = 10.0.0.0/8

#Subnet name
SHARED_AKS_SUBNET_NAME = aks-subnet

#Subnet Address range
##NOTE: In case of using custom subnet address spaces,make sure that the below mentioned subnets do not overlap with each other
##NOTE: The --pod-cidr should be a large address space that isn't in use elsewhere in your network environment. This range includes any on-##premises network ranges if you connect, or plan to connect, your Azure virtual networks using Express Route or a Site-to-Site VPN connection.
##This address range must be large enough to accommodate the number of nodes that you expect to scale up to. You can't change this address ##range once the cluster is deployed if you need more addresses for additional nodes

# SHARED Cluster subnet address space... For integration cluster subnet ranges, please refer conf/internal/network.properties
AKS_SUBNET_ADDRESS_SPACE = 10.240.0.0/16

SHARED_APP_GATEWAY_SUBNET_ADDRESS_SPACE = 10.0.0.0/24


## Network Configuration Inputs
INTEGRATION_VNET_NAME = aks-vnet

INTEGRATION_VNET_ADDRESS_SPACE = 10.0.0.0/8

INTEGRATION_SUBNET_NAME = aks-subnet

INTEGRATION_APP_GATEWAY_SUBNET_ADDRESS_SPACE = 10.0.0.0/24

INTEGRATION_DOCKER_BRIDGE_CIDR = 172.17.0.1/16

JUMPBOX_SUBNET_ADDRESS_SPACE = 10.0.2.0/24

##NOTE: The --service-cidr is used to assign internal services in the AKS cluster an IP address. This IP address range should be an address ##space that isn't in use elsewhere in your network environment. This range includes any on-premises network ranges if you connect, or plan to ##connect, your Azure virtual networks using Express Route or a Site-to-Site VPN connection.
SERVICE_CIDR = 10.120.0.0/16

##NOTE: The --dns-service-ip address should be the .10 address of your service IP address range.
DNS_SERVICE_IP = 10.120.0.10

##NOTE: The --docker-bridge-address lets the AKS nodes communicate with the underlying management platform. This IP address must not be within ##the virtual network IP address range of your cluster, and shouldn't overlap with other address ranges in use on your network.
DOCKER_BRIDGE_CIDR = 172.17.0.1/16


#-----------------------------------------------------------------------------------------
## Azure DB service params
#SSL enabled for MYSQL DB. Default value is true.
IS_DB_SSL_ENABLED = true

## All the below inputs are for MYSQL DB		
#For MYSQL DB, Skutier can be Basic, GeneralPurpose, or MemoryOptimized tier
DB_SKUTIER = GeneralPurpose
		
#Specify the vCore capacity.		
#If Skutier is 	Basic Possible values include 1,2		
#If Skutier is GeneralPurpose Possible values include 2, 4, 8, 16, 32 or 64 		
#If Skutier is MemoryOptimized Possible values include 2, 4, 8, 16, 32		
DB_SKUCAPACITY = 2
		
#Specify the Compute generation		
#If Skutier is 	Basic Possible values include Gen4, Gen5		
#If Skutier is GeneralPurpose Possible values include Gen4, Gen5 		
#If Skutier is MemoryOptimized Possible values include Gen5		
DB_SKUFAMILY = Gen5
		
#Specify TierPrefix_family_capacity.For example B_Gen5_1, GP_Gen5_16, MO_Gen5_32		
DB_SKUNAME = GP_Gen5_2
		
#Specify the max provisioned storage size required for the server in megabytes.
# For Non-Production
DB_SKUSIZEMB_NON_PROD = 5120
#For Production
DB_SKUSIZEMB_PROD = 10240
		
#Currently supported mysql versions are 5.6,5.7		
MYSQL_VERSION = 5.7		
 		
#Specify the desired backup retention period in days. If PCI is enabled choose the value as 31 days. If PCI is disabled choose the value as 15 days.		
DB_BACKUP_RETENTION_DAYS = 31
		
#Set the below value to Enabled to configure Geo-Redundancy backup for DB snapshots. Default value is Disabled.	
# For Non-Production
DB_GEO_REDUNDANT_BACKUP_NON_PROD = Disabled
# For Production
DB_GEO_REDUNDANT_BACKUP_PROD=Enabled


#-----------------------------------------------------------------------------------------
### Azure Firewall
# AZURE_FIREWALL_ENABLED = false

#-------------------------------------------------------------------------------
### AZURE LOG ANALYTICS DETAILS ###
# Enable log analytics for the Azure Kubernetes Cluster(true/false)
AZURE_LOG_ANALYTICS_ENABLED = true

# Log Analytics service tier is required if log analytics is enabled
# Log Analytics service tier: Free, Standalone, or PerNode
# If azure account is created before Apr 2, 2018 then Free tier is applicable.  Free tier has a 500 MB limit on the amount of data collected daily and doesnâ€™t allow for data retention periods 
# longer than 7 days.
#For customers onboarding to Log Analytics after April 2, 2018 Standalone or PerNode are the options. Standalone tier is charged per GB of data where as PerNode is charged per worker #node. Refere Azure pricing for Log Analytics
#There is no daily limit for data upload for Standalone or PerNode tiers.(Standalone/PerNode)
AZURE_LOG_ANALYTICS_SERVICE_TIER = Standalone

# Log Analytics data retention period is required if log analytics is enabled
# For free tier, data retention period is not allowed for more than 7 days
# For Standalone, PerNode tiers, data is  retained at no charge for the first 31 days
# Minimum data retention period: 7
# Maximum data rention period : 738
AZURE_LOG_ANALYTICS_DATA_RETENTION_PERIOD = 31



#-------------------------------------------------------------------------------
##Clamav & Ossec details(true/false)
#For clamav & Ossec Jumpbox should be enabled
INSTALL_CLAMAV = true

INSTALL_OSSEC = true

#-------------------------------------------------------------------------------
##AZURE VMS SERVICE PARAMETERS

WORKSPACE_KEYVAULT_NAME = 

IDENTITY_KEYVAULT_NAME = 

VMS_CLIENT_ID = 

VMS_CLIENT_SECRET = 

VMS_TENANT_ID = 

#-------------------------------------------------------------------------------
## Cronjob timings for clamscan and ossec
## NOTE: All cronjob timings follow UTC timezone.
## Crontab timing should be configured in the format given below
## * * * * *
## | | | | |
## | | | | |
## | | | | +---- Day of the Week   (range: 1-7, 1 standing for Monday)
## | | | +------ Month of the Year (range: 1-12)
## | | +-------- Day of the Month  (range: 1-31)
## | +---------- Hour              (range: 0-23)
## +------------ Minute            (range: 0-59)
## # = any value
## Example: 00 16 # # # => this crontab runs everyday at 16:00:00 (UTC)
## Default values for cronjobs are set, user can change according to requirements

clamscan_cron_schedule = 00 01 # # #

osseclogpush_cron_schedule = 00 00 # # #

#-----------------------------------------------------------------------------------------
##########################################################################################
############################### VOLTMX FOUNDRY  UPDATE PARAMETERS ###################################
##########################################################################################
## User should not edit the parameters unless update for KF setup is required or need to
## configure pod autoscaling params.
#-----------------------------------------------------------------------------------------

#-----------------------------------------------------------------------------------------
## INTEGRATION SERVICE
#-----------------------------------------------------------------------------------------

# Number of Pods. Value should be greater than equals to number of nodes.
# Example - If aks node count is 2 , then set replica value to be greater than or equal to 2
NUM_INTEGRATION_PODS = 2

# Maximum number of pods to be scaled
INTEGRATION_POD_MAX_REPLICAS = 5

# Scaling of pods will be triggered if cpu/memory utilization crosses threshold value
# Cpu percentage utilization threshold to trigger scaling
INTEGRATION_POD_CPU_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough CPU according to the requests configuration for pod placement
INTEGRATION_POD_CPU_USAGE_REQUESTS = 1200m

# Memory percentage utilization threshold to trigger scaling
INTEGRATION_POD_MEMORY_USAGE_THRESHOLD = 95

# AKS will look for a node that has enough memory according to the requests configuration for pod placement
INTEGRATION_POD_MEMORY_USAGE_REQUESTS = 4.0G

# Pod memory usage limit on Node
INTEGRATION_POD_MEMORY_USAGE_LIMIT = 4.2G

#Number of pods more than the desired number of Pods
#For example, maxSurge: 1 means that there will be at most 4 pods during the update process if number of pods is 3
INTEGRATION_MAX_SURGE = 1

#Number of pods that can be unavailable during the update process
INTEGRATION_MAX_UNAVAILABLE = 1

INTEGRATION_DOCKER_IMAGE = kfinstaller/voltmx-foundry-integration:9.1.0.3_QA

# Readiness probe initial delay for Integration, in seconds (Number)
INTEGRATION_READINESS_INIT_DELAY = 60

# Liveness probe initial delay for Integration, in seconds (Number)
INTEGRATION_LIVENESS_INIT_DELAY = 300

#Kubernetes secret used by integration pods to access azure file share.
AZURE_FILE_SHARE_SECRET = azure-file-share-secret

#Mount path of the Integration pods to store data.
MOUNT_PATH = /mnt/shared

#-----------------------------------------------------------------------------------------
## ENGAGEMENT SERVICE
#-----------------------------------------------------------------------------------------

# Number of Pods. Value should be greater than equals to number of nodes.
# Example - If aks node count is 2 , then set replica value to be greater than or equal to 2
NUM_ENGAGEMENT_PODS = 2

# Maximum number of pods to be scaled
ENGAGEMENT_POD_MAX_REPLICAS = 4

# Scaling of pods will be triggered if cpu/memory utilization crosses threshold value
# Cpu percentage utilization threshold to trigger scaling
ENGAGEMENT_POD_CPU_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough CPU according to the requests configuration for pod placement
ENGAGEMENT_POD_CPU_USAGE_REQUESTS_NON_PROD = 400m

ENGAGEMENT_POD_CPU_USAGE_REQUESTS_PROD = 1000m

# Memory percentage utilization threshold to trigger scaling
ENGAGEMENT_POD_MEMORY_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough memory according to the requests configuration for pod placement
ENGAGEMENT_POD_MEMORY_USAGE_REQUESTS = 2.2G

# Pod memory usage limit on Node
ENGAGEMENT_POD_MEMORY_USAGE_LIMIT = 2.2G

#Number of pods more than the desired number of Pods
#For example, maxSurge: 1 means that there will be at most 4 pods during the update process if number of pods is 3
ENGAGEMENT_MAX_SURGE = 1

#Number of pods that can be unavailable during the update process
ENGAGEMENT_MAX_UNAVAILABLE = 1

ENGAGEMENT_DOCKER_IMAGE = kfinstaller/voltmx-foundry-engagement:9.1.0.3_QA

# Readiness probe initial delay for Engagement, in seconds (Number)
ENGAGEMENT_READINESS_INIT_DELAY = 60

# Liveness probe initial delay for Engagement, in seconds (Number)
ENGAGEMENT_LIVENESS_INIT_DELAY = 300

#-----------------------------------------------------------------------------------------
## IDENTITY SERVICE
#-----------------------------------------------------------------------------------------
# Number of Pods. Value should be greater than equals to number of nodes.
# Example - If aks node count is 2 , then set replica value to be greater than or equal to 2
NUM_IDENTITY_PODS = 2

# Maximum number of pods to be scaled
IDENTITY_POD_MAX_REPLICAS = 4

# Scaling of pods will be triggered if cpu/memory utilization crosses threshold value
# Cpu percentage utilization threshold to trigger scaling
IDENTITY_POD_CPU_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough CPU according to the requests configuration for pod placement
IDENTITY_POD_CPU_USAGE_REQUESTS_NON_PROD = 1000m

IDENTITY_POD_CPU_USAGE_REQUESTS_PROD = 1500m

# Memory percentage utilization threshold to trigger scaling
IDENTITY_POD_MEMORY_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough memory according to the requests configuration for pod placement
IDENTITY_POD_MEMORY_USAGE_REQUESTS_NON_PROD = 2.2G

# Pod memory usage limit on Node
IDENTITY_POD_MEMORY_USAGE_LIMIT_NON_PROD = 2.2G

IDENTITY_POD_MEMORY_USAGE_REQUESTS_PROD = 3.9G

IDENTITY_POD_MEMORY_USAGE_LIMIT_PROD = 3.9G

#Number of pods more than the desired number of Pods
#For example, maxSurge: 1 means that there will be at most 4 pods during the update process if number of pods is 3
IDENTITY_MAX_SURGE = 1

#Number of pods that can be unavailable during the update process
IDENTITY_MAX_UNAVAILABLE = 1

IDENTITY_DOCKER_IMAGE = kfinstaller/voltmx-foundry-identity:9.1.0.3_QA

# Readiness probe initial delay for Identity, in seconds (Number)
IDENTITY_READINESS_INIT_DELAY = 60

# Liveness probe initial delay for Identity, in seconds (Number)
IDENTITY_LIVENESS_INIT_DELAY = 300


#-----------------------------------------------------------------------------------------
## CONSOLE SERVICE
#-----------------------------------------------------------------------------------------

# Number of Pods. Value should be equal to number of nodes. Each pod of a foundry  service
# will be assigned to a different node.
# Example - If aks node count is 2 , then set replica value to be greater than or equal to 2
NUM_CONSOLE_PODS = 2

# Maximum number of pods to be autoscaled
CONSOLE_POD_MAX_REPLICAS = 4

# Scaling of pods will be triggered if cpu/memory utilization crosses threshold value
# Cpu percentage utilization threshold to trigger scaling
CONSOLE_POD_CPU_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough CPU according to the requests configuration for pod placement
CONSOLE_POD_CPU_USAGE_REQUESTS = 500m

# Memory percentage utilization threshold to trigger scaling
CONSOLE_POD_MEMORY_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough memory according to the requests configuration for pod placement
CONSOLE_POD_MEMORY_USAGE_REQUESTS = 4.2G

# Pod memory usage limit on Node
CONSOLE_POD_MEMORY_USAGE_LIMIT = 4.2G

#Number of pods more than the desired number of Pods
#For example, maxSurge: 1 means that there will be at most 4 pods during the update process if number of pods is 3
CONSOLE_MAX_SURGE = 1

#Number of pods that can be unavailable during the update process
CONSOLE_MAX_UNAVAILABLE = 1

CONSOLE_DOCKER_IMAGE = kfinstaller/voltmx-foundry-console:9.1.0.3_QA

# Readiness probe initial delay for Console, in seconds (Number)
CONSOLE_READINESS_INIT_DELAY = 100

# Liveness probe initial delay for API Portal, in seconds (Number)
CONSOLE_LIVENESS_INIT_DELAY = 300


#-----------------------------------------------------------------------------------------
## API DEV PORTAL SERVICE
#-----------------------------------------------------------------------------------------

# Number of Pods. Value should be greater than equals to number of nodes.
# Example - If aks node count is 2 , then set replica value to be greater than or equal to 2
NUM_API_PORTAL_PODS = 1

# Maximum number of pods to be scaled
APIPORTAL_POD_MAX_REPLICAS = 1

# Cpu percentage utilization threshold to trigger scaling
APIPORTAL_POD_CPU_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough CPU according to the requests configuration for pod placement
APIPORTAL_POD_CPU_USAGE_REQUESTS = 300m

# Memory percentage utilization threshold to trigger scaling
APIPORTAL_POD_MEMORY_USAGE_THRESHOLD = 90

# AKS will look for a node that has enough memory according to the requests configuration for pod placement
APIPORTAL_POD_MEMORY_USAGE_REQUESTS = 1G

# Pod memory usage limit on Node
APIPORTAL_POD_MEMORY_USAGE_LIMIT = 1.4G

#Number of pods more than the desired number of Pods
#For example, maxSurge: 1 means that there will be at most 4 pods during the update process if number of pods is 3
APIPORTAL_MAX_SURGE = 1

#Number of pods that can be unavailable during the update process
APIPORTAL_MAX_UNAVAILABLE = 1

APIPORTAL_DOCKER_IMAGE = kfinstaller/voltmx-foundry-apiportal:9.1.0.3_QA

# Readiness probe initial delay for API Portal, in seconds (Number)
APIPORTAL_READINESS_INIT_DELAY = 60

# Liveness probe initial delay for Console, in seconds (Number)
APIPORTAL_LIVENESS_INIT_DELAY = 300

#-----------------------------------------------------------------------------------------
## VOLTMX DB FLYWAY MIGRATION
#-----------------------------------------------------------------------------------------

VOLTMX_DB_DOCKER_IMAGE = kfinstaller/voltmx-foundry-db:9.1.0.3_QA


#-----------------------------------------------------------------------------------------
##########################################################################################
############################### VOLTMX FOUNDRY PARAMETERS ###################################
##########################################################################################
## User should not edit the parameters, they are voltmx foundry specific params
#-----------------------------------------------------------------------------------------


#Sets the Domain name prefix for the cluster.
DNS_NAME_PREFIX = voltmx


#-----------------------------------------------------------------------------------------
## Azure DB service params

# Database name 
SHARED_DB_NAME = voltmxfoundry
         
SHARED_DATABASE_HOST = 

# Database port
# For mysql : 3306
# For mssql : 1433
SHARED_DATABASE_PORT = 3306

# Enter ips in quotes Eg:array_to_whitelist_ips_to_access_database = ("w1.x1.y1.z1" "w2.x2.y2.z2" "w3.x3.y3.z3")
ARRAY_TO_WHITELIST_IPS_TO_ACCESS_DB = ()

# Prefix which will be added to the schema name
DATABASE_PREFIX = voltmx

# Suffix which will be added to the schema name
DATABASE_SUFFIX = DB

#default collation type
DATABASE_COLLATION = SQL_Latin1_General_CP1_CI_AS

IS_DB_LOGS_ENABLED = true

# These properties are for foundry integration database
INTEGRATION_DB_NAME = voltmxfoundry

INTEGRATION_DATABASE_HOST = 

# Database port
# For mysql : 3306
# For mssql : 1433
INTEGRATION_DATABASE_PORT = 3306

#-----------------------------------------------------------------------------------------
## Azure App Gateway params

AZURE_APP_GATEWAY_NAME = VoltMXAppGateway

# Application Gateway healthcheck probe name
AZURE_APP_GATEWAY_PROBE_NAME = VoltMXAppGatewayProbe

ENGAGEMENT_APP_GATEWAY_PROBE_NAME_PREFIX = engagement

ENGAGEMENT_APP_GATEWAY_PROBE_PATH = /vpns/service/healthcheck/json

# No need to modify by the user, it is voltmx foundry specific setting
SHARED_APP_GATEWAY_PROBE_PATH = /authService/v1/manage/checkhealth

INTEGRATION_APP_GATEWAY_PROBE_PATH = /admin/healthcheck?output=json

# App Gateway subnet name : aks-vnet-<name>
AZURE_APP_GATEWAY_SUBNET = aks-vnet-provisionAppGatewaySubnet

# App Gateway backend http setting name
AZURE_APP_GATEWAY_HTTP_SETTINGS = appGatewayBackendHttpSettings

# App Gateway public ip name - for interal use only... do not modify
APP_GATEWAY_PUBLIC_IP_NAME = voltmxfoundryAppGateway

# If Web Application firewall needs to enabled , set it to true.
AZURE_APP_GATEWAY_WAF_ENABLED = true

# Number of nodes required for Application Gateway (Allowed upto 10 nodes)
AZURE_APP_GATEWAY_NODES_COUNT = 2

# Application Gateway Node Size
# For Standard tier : Standard_Small, Standard_Medium, Standard_Large
# For WAF tier : WAF_Medium, WAF_Large, WAF_v2
AZURE_APP_GATEWAY_SIZE = WAF_Medium

# Sku tier for application gateway
AZURE_APP_GATEWAY_SKU_TIER = WAF

#Logging option for appgateway (true/false)
#If there are GDPR concerns for customer, after taking required consent from customer, disable the flag.
ENABLE_APP_GATEWAY_LOGS = true

#Minimum number of appgateway nodes
MIN_CAPACITY = 2

#Maximum number of appgateway nodes
MAX_CAPACITY = 4

#-----------------------------------------------------------------------------------------
# Azure CDN params

AZURE_CDN_SKU = Premium_Verizon

#-----------------------------------------------------------------------------------------

# Jumpbox to ssh into AKS Cluster nodes
JUMPBOX_ENABLED = true

# For internal use only... do not modify
JUMPBOX_NAME = jumpbox

#-----------------------------------------------------------------------------------------

### VoltMXFoundry Configuration
INGRESS_CONF_NAME = nginx-configuration

SHARED_ILB_IP = 

INTEGRATION_ILB_IP = 

#Number of nginx ingress controller pods. Default value is set to 2.
NUM_INGRESS_PODS = 2

#-----------------------------------------------------------------------------------------
## INTEGRATION SERVICE
#-----------------------------------------------------------------------------------------

# Minimum RAM percentage for Integration (String)
INTEGRATION_MIN_RAM_PERCENTAGE = 50

# Maximum RAM percentage for Integration (String)
INTEGRATION_MAX_RAM_PERCENTAGE = 65

# Custom JAVA_OPTS for Integration (String)
INTEGRATION_CUSTOM_JAVA_OPTS = -XX:NewSize=512m -XX:MaxNewSize=750m -javaagent:/usr/local/tomcat/newrelic/newrelic.jar -Dnewrelic.config.file=/usr/local/tomcat/newrelic/newrelic.yaml -Dnewrelic.config.app_name=INTEGRATION


#-----------------------------------------------------------------------------------------
## ENGAGEMENT SERVICE
#-----------------------------------------------------------------------------------------

# Minimum RAM percentage for Engagement (String)
ENGAGEMENT_MIN_RAM_PERCENTAGE = 50

# Maximum RAM percentage for Engagement (String)
ENGAGEMENT_MAX_RAM_PERCENTAGE = 65

# Custom JAVA_OPTS for Engagement (String)
ENGAGEMENT_CUSTOM_JAVA_OPTS = -XX:NewSize=256m -XX:MaxNewSize=512m -javaagent:/usr/local/tomcat/newrelic/newrelic.jar -Dnewrelic.config.file=/usr/local/tomcat/newrelic/newrelic.yaml -Dnewrelic.config.app_name=ENGAGEMENT

#-----------------------------------------------------------------------------------------
## IDENTITY SERVICE
#-----------------------------------------------------------------------------------------

# Minimum RAM percentage for Identity (String)
IDENTITY_MIN_RAM_PERCENTAGE = 50

# Maximum RAM percentage for Identity (String)
IDENTITY_MAX_RAM_PERCENTAGE = 65

# Custom JAVA_OPTS for Identity (String)
IDENTITY_CUSTOM_JAVA_OPTS = -XX:NewSize=256m -XX:MaxNewSize=512m -javaagent:/usr/local/tomcat/newrelic/newrelic.jar -Dnewrelic.config.file=/usr/local/tomcat/newrelic/newrelic.yaml -Dnewrelic.config.app_name=IDENTITY

#-----------------------------------------------------------------------------------------
## CONSOLE SERVICE
#-----------------------------------------------------------------------------------------

# Minimum RAM percentage for Console (String)
CONSOLE_MIN_RAM_PERCENTAGE = 50

# Maximum RAM percentage for Console (String)
CONSOLE_MAX_RAM_PERCENTAGE = 60

# Custom JAVA_OPTS for Console (String)
CONSOLE_CUSTOM_JAVA_OPTS = -XX:NewSize=256m -XX:MaxNewSize=512m -javaagent:/usr/local/tomcat/newrelic/newrelic.jar -Dnewrelic.config.file=/usr/local/tomcat/newrelic/newrelic.yaml -Dnewrelic.config.app_name=CONSOLE

#-----------------------------------------------------------------------------------------
## API DEV PORTAL SERVICE
#-----------------------------------------------------------------------------------------

# Minimum RAM percentage for API Portal (String)
APIPORTAL_MIN_RAM_PERCENTAGE = 50

# Maximum RAM percentage for API Portal (String)
APIPORTAL_MAX_RAM_PERCENTAGE = 80

APIPORTAL_CUSTOM_JAVA_OPTS = -XX:NewSize=256m -XX:MaxNewSize=256m -javaagent:/usr/local/tomcat/newrelic/newrelic.jar -Dnewrelic.config.file=/usr/local/tomcat/newrelic/newrelic.yaml -Dnewrelic.config.app_name=APIPORTAL

#-------------------------------------------------------------------------------
### Azure OMS Details ###
AZURE_OMS_WORKSPACE_ID = 

AZURE_OMS_WORKSPACE_PRIMARYKEY = 

# For integration cluster
INTEGRATION_AZURE_OMS_WORKSPACE_ID = 

INTEGRATION_AZURE_OMS_WORKSPACE_PRIMARYKEY = 

#-------------------------------------------------------------------------------
### Azure Redis cache Details for Identity Service ###

IS_AUTH_REDIS_CACHE_ENABLED = true

AZURE_AUTH_REDIS_CACHE_NAME = kfrediscacheauth

AZURE_AUTH_REDIS_SKU_TYPE = Standard

AZURE_AUTH_REDIS_SKU_FAMILY = C

AZURE_AUTH_REDIS_SKU_CAPACITY = 0

AZURE_AUTH_REDIS_CACHE_URL = 

AZURE_AUTH_REDIS_CACHE_PORT = 6379

#Below is the flag to choose Eviction policy for the Identity service redis cache. 
#Available Eviction policies are volatile-lru,allkeys-lru,volatile-random,allkeys-random,volatile-ttl,noeviction. Default is set to volatile-lru.
AZURE_AUTH_REDIS_CACHE_EVICTION_POLICY = volatile-lru

AZURE_AUTH_REDIS_CACHE_PRIMARY_KEY = 

#-------------------------------------------------------------------------------
### Azure Redis cache Details for Integration Service ###
# NOTE: We noticed Azure Redis is not very efficient and causing huge latency for the kind of data integration is storing into cache. Hence disabling it by default.
IS_SERVER_REDIS_CACHE_ENABLED = false

AZURE_SERVER_REDIS_CACHE_NAME = kfrediscacheserver

AZURE_SERVER_REDIS_SKU_TYPE = Standard

AZURE_SERVER_REDIS_SKU_FAMILY = C

AZURE_SERVER_REDIS_SKU_CAPACITY_NON_PROD = 0 

AZURE_SERVER_REDIS_SKU_CAPACITY_PROD = 1

AZURE_SERVER_REDIS_CACHE_URL = 

AZURE_SERVER_REDIS_CACHE_PORT = 6379

#Below is the flag to choose Eviction policy for the Integration service redis cache. 
#Available Eviction policies are volatile-lru,allkeys-lru,volatile-random,allkeys-random,volatile-ttl,noeviction. Default is set to volatile-lru.
AZURE_SERVER_REDIS_CACHE_EVICTION_POLICY = volatile-lru

AZURE_SERVER_REDIS_CACHE_PRIMARY_KEY = 

#Below is the value for Minimum idle Redis connection amount.
AZURE_SERVER_REDIS_CONNECTION_MINIMUM_IDLE_SIZE = 5

#Below is the value for Redis Idle connection timeout.
AZURE_SERVER_REDIS_IDLE_CONNECTION_TIMEOUT_IN_MILLISECONDS = 10000

#Below is the value for Redis connection maximum pool size.
AZURE_SERVER_REDIS_CONNECTION_POOL_SIZE = 64

#Below is the value for timeout in milliseconds during connecting to Redis server.
AZURE_SERVER_REDIS_CONNECTION_TIMEOUT = 10000

#-------------------------------------------------------------------------------
### Azure File Share Details ###

#Is Azure file share to be attached to the cloud (true/false)
AZURE_FILE_SHARE_ENABLED = true

#For internal use only. Please do not edit below value. If change of below value is mandate make sure you enter the value as a string with suffix "fs". Eg: hclfs
AZURE_FILE_SHARE_STORAGE_ACCOUNT = voltmxfs

#Azure file share directory name must be between 1 and 255 characters in length and must not contain \/:|<>*?
AZURE_FILE_SHARE_DIRECTORY_NAME = voltmx

#Only few regions support ZRS.If you have selected the region which doesn't support Zone Redundant Storage, please change the below value to Standard_LRS.
#If Storage Account kind is StorageV2, possible values include Standard_LRS, Standard_GRS, Standard_RAGRS, Standard_ZRS, Premium_LRS, Premium_ZRS,Standard_GZRS,Standard_RAGZRS.
#If Storage Account kind is FileStorage, possible values include Premium_LRS.
STORAGE_ACCOUNT_REPLICATION_TYPE = Standard_ZRS

#Below is the value for Storage account kind.Possible values include Storage, StorageV2, FileStorage.
STORAGE_ACCOUNT_KIND = StorageV2

#Only the Standard performance has access tiers.Possible values include Hot, Cool.
ACCESS_TIER = Cool

#file share name must be between 3 and 63 characters in length and use numbers, lower-case letters and dash (-) only.
AZURE_FILE_SHARE_NAME = voltmxfileshare

#The maximum size of the share, in Gigabytes.
#If performance is Standard then its value must be greater than 0, and less than or equal to 5120(5 Terabytes).
#If performance is Premium then its value must be greater than 0, and less than or equal to 102400(100 Terabytes).
AZURE_FILE_SHARE_QUOTA = 10

#Recovery Services vault is used to configure Backup of Azure file share.
#Recovery Services vault name must be between 2 and 50 characters.It must start with a letter and consist only of letters, numbers, and hyphens.
AZURE_FILE_SHARE_BACK_UP_VAULT = VoltMXRecoveryServiceVault

AZURE_FILE_SHARE_STORAGE_ACCOUNT_ACCESS_KEY = 

#-------------------------------------------------------------------------------

#Azure storage account name must be between 3 and 24 characters in length and valid characters are alphabets,numericals and it should be in lowercase.
AZURE_STORAGE_ACCOUNT_NAME = voltmx

#-------------------------------------------------------------------------------	
### PCI installation requirements ###

#To enable/disable set below value to true/false. If ClamAV or OSSEC are enabled please set below value to true.
PCI_ON_SCALED_NODES = true

#Enter passphrase of ssh private key placed in /sshkeys folder of installation directory. If passphrase is empty, do not enter any value.	
#We recommend to generate ssh key without passphrase to avoid manual intervention during installation. Nodes are protected by other means such as google authenticator.
ID_RSA_PASSPHRASE = 

#For Internal use only
JUMPBOX_USER_NAME = devops

#For Internal use only
COMMON_STORAGE_ACCOUNT = voltmxrepo

#For Internal use only
STORAGE_ACCOUNT_FOR_AZURE_FUNCTION = funcrepo

#For Internal use only
Python_Install_script_url = 

#For Internal use only
FUNCTION_APP_NAME = 

#For Internal use only
AZURE_FUNCTION_NAME = InstallVoltMXExtensionScripts

PCI_ACTION_GROUP_NAME = PCIActionGroup

PCI_ACTION_GROUP_SHORT_NAME = PCIAG

PCI_ACTION_NAME = TriggerFunc

#-------------------------------------------------------------------------------

AZURE_FIREWALL_NAME = AzureNatgateway

# NOTE:  Natgateway subnet prefix should not overlap with AKS subnet, Devops and App gateway subnet.
AZURE_FIREWALL_SUBNET_PREFIX = 10.0.3.0/24

INTEGRATION_AZURE_FIREWALL_SUBNET_PREFIX = 10.0.3.0/24

AZURE_FIREWALL_PUBLIC_IP_NAME = NatgatewayPublicIP