<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  

  <link rel="shortcut icon" href="/volt-mx-docs/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="/volt-mx-docs/assets/css/just-the-docs-default.css">
  <link rel="stylesheet" href="/volt-mx-docs/assets/css/custom.css">
  

  
    <script type="text/javascript" src="/volt-mx-docs/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="/volt-mx-docs/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Volt MX | Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform.</title>
<meta name="generator" content="Jekyll v3.9.0" />
<meta property="og:title" content="Volt MX" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<meta property="og:description" content="Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform." />
<link rel="canonical" href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html" />
<meta property="og:url" content="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html" />
<meta property="og:site_name" content="Volt MX" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Volt MX" />
<script type="application/ld+json">
{"@type":"WebPage","url":"https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html","headline":"Volt MX","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hcl-tech-software.github.io/volt-mx-docs/Volt_Mx_logo.png"}},"description":"Industry-leading low-code application development platform for delivering beautiful apps across multiple digital touch points with one platform.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


  
</head>

<body>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-search" viewBox="0 0 24 24">
    <title>Search</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
      <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
    </svg>
  </symbol>
</svg>

<div class="header-wrap">
  
  <div class="top-header">
    <div class="site-header">
      <a href="https://hcl-tech-software.github.io/volt-mx-docs/" class="site-title lh-tight">
  <div class="site-logo"></div>

</a>
      <a href="#" id="mainmenu-button"  class="site-button">
        <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
      </a>
    </div>
  </div>
  <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="svg-link" viewBox="0 0 24 24">
      <title>Link</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link">
        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
      </svg>
    </symbol>
    <symbol id="svg-search" viewBox="0 0 24 24">
      <title>Search</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search">
        <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
      </svg>
    </symbol>
    <symbol id="svg-menu" viewBox="0 0 24 24">
      <title>Menu</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu">
        <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
      </svg>
    </symbol>
    <symbol id="svg-arrow-right" viewBox="0 0 24 24">
      <title>Expand</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right">
        <polyline points="9 18 15 12 9 6"></polyline>
      </svg>
    </symbol>
    <symbol id="svg-doc" viewBox="0 0 24 24">
      <title>Document</title>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file">
        <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline>
      </svg>
    </symbol>
  </svg>

  <div id="main-header" class="main-header">
  
  
  <!-- <div class="search-prepare" id="search-prepare">
    <p><img src=" /volt-mx-docs/assets/images/preload.gif" style="height: 24px; width: 24px; margin-right: 5px;" /> Preparing your search results...</p>
  </div>  -->
    <div class="search">
   
      <div class="search-input-wrap">
        <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="search resources..." aria-label="Search Volt MX" autocomplete="off">
        <label for="search-input" class="search-label" id="searchButton"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label>
                </div>
                       
      <div id="search-results" class="search-results"></div>

      
    </div>
  

  <!-- delete below styles if you uncomment all page-nav links -->
  <style>
    @media (min-width: 50rem){
      .page-nav {right: 400px;top: 0;}
      .search-input-wrap {max-width: 400px;}
    }

  </style>

<!-- below are page-nav links - delete above styles if uncommenting -->
  <ul class="page-nav" id="page-nav">
   <!-- <li><a href="#">Community</a></li> -->
   <li><a href="https://volt-mx.hcltechsw.com/" >Ideas</a></li>
   <li><a href="#" class="active">Learn</a></li>
   <!-- <li><a href="#">Releases</a></li>
   <li><a href="#">Training</a></li>
   <li><a href="#">Ideas</a></li>
   <li><a href="#">Marketplace</a></li>
   <li><a href="#">Login</a></li> -->
 </ul>
 

 
</div>
<script>
  const pageNav = document.getElementById('page-nav');
   const mainHeader = document.getElementById('main-header');
   const mainmenuButton = document.getElementById('mainmenu-button');
 (function(){
  
  mainmenuButton.addEventListener('click', function(){
    pageNav.classList.toggle('nav-open');
});
})();

</script>
  <div class="sub-nav-wrap" id="myDIV">
    <ul class="sub-nav">
        <li class="home-link">
            <a href="/volt-mx-docs/"  class="sub-link ">Home</a>
        </li>
        <!-- <li>
            <a href="/volt-mx-docs/docs/getting-started/"  class="sub-link">Getting Started</a>
        </li> -->
        <li>
            <a href="/volt-mx-docs/docs/tutorials/" class="sub-link ">Tutorials</a>
        </li>
        <li>
            <a href="/volt-mx-docs/docs/documentation/" class="sub-link" id="docLink">Documentation</a>
        </li>
        <li>
            <!-- <a href="/volt-mx-docs/docs/articles/" title="test" class="sub-link">Articles</a> -->
            <a href="https://support.hcltechsw.com/csm?id=kb_search&spa=1&kb_category=db382ff1db631c14a45ad9fcd3961936" title="Articles" class="sub-link">Articles</a>
        </li>
        <li>
            <a href="https://academy.hcltechsw.com/#VoltMxLearningJourneys" title="Articles" class="sub-link">Software Academy</a>
        </li>
    </ul>

    <div class="category-wrap">
    <a href="#" id="menu-button" class="site-button">
        <!-- <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> -->
        select a topic <svg viewBox="0 0 24 24" class="carat-topic"><use xlink:href="#svg-arrow-right"></use></svg>
      </a>
      
          <a href="#" id="sub-menu-button" class="sub-site-button">
             <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg>
          </a></div>    
</div><style>
    @media (min-width: 50rem) {
    .content-wrap {top: 134px; height: calc(100% - 185px);}
    }   
</style>
<div class="head-ribbon">
    Kony Quantum is now HCL Volt MX. See <a href="#" class="revisedTermsBtn">Revised Terminology</a>. Current Quantum users, see the important note about API naming.  
</div>
</div> 

<style>
  .sub-nav a[href*="/documentation/"] {
   border-bottom: 3px #d694f9 solid;
} 
</style>

<div class="content-wrap ">
  <div class="side-bar scrollable-container">
      <div class="version-dropdown">
        Release:  
        <select name="version" id="version">
            <option value="V9">V9</option>
        </select>
      </div>
    <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav scrollable" >
      <ul class="nav-list"><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/VMX_release_notes.html" class="nav-list-link">Volt MX Release Notes</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/" class="nav-list-link">Fundamentals</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/projectorg.html" class="nav-list-link">Project Organization</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appUserInterface.html" class="nav-list-link">App User Interface</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/widgetApiReference.html" class="nav-list-link">Widgets & API Reference</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/webAppDevelopment.html" class="nav-list-link">Web App Development</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/buildAndPublish.html" class="nav-list-link">Build and Publish</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataBackEndIntergration.html" class="nav-list-link">Data & Back-end Integration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/extensibility.html" class="nav-list-link">Extensibility</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/security.html" class="nav-list-link">Security</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/voltmxFoundryFundamentals.html" class="nav-list-link">Volt MX Foundry Fundamentals</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/howTosSampleApps.html" class="nav-list-link">How Tos & Sample Apps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/dataIntegrationServices.html" class="nav-list-link">Data Integration Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/offlineObjects.html" class="nav-list-link">Offline Objects</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/apiMangement.html" class="nav-list-link">API Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/appServicesAdminitration.html" class="nav-list-link">App Services Administration</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/foundrySDKs.html" class="nav-list-link">Foundry SDKs</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/advancedServerFeature.html" class="nav-list-link">Advanced Server Features</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/analyticsAndApm.html" class="nav-list-link">Analytics and APM</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/engagementServices.html" class="nav-list-link">Engagement Services</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/quantumSync.html" class="nav-list-link">Volt MX Legacy Sync (Deprecated)</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/devOps.html" class="nav-list-link">DevOps</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/heradlessAndContinuousIntegration.html" class="nav-list-link">Headless and Continuous Integration Build</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/installationManagement.html" class="nav-list-link">Installation & Management</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/deployment.html" class="nav-list-link">Deployment</a></li><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/documentation73and70.html" class="nav-list-link">Documentation for 7.3 and 7.0 Releases</a></li></ul>
    </nav>
  </div>
  <div class="split-hold" >
    <div class="split__bar"></div>
    <div class="closeclick" id="left-close"></div>
  </div>
  
  
  <!-- start main  -->
  <div class="main scrollable-container resizable-right" id="top">
      
    <div id="main-content-wrap" class="main-content-wrap scrollable">
      
     
      
      
      
      <div id="main-content" class="main-content" role="main">
        
          <p>You are here: <a href="#installation">Installation</a> &gt; Salient Features</p>
      <h1 id="overview">
        
        
          <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview
        
        
      </h1>
    

<p>The Volt MX Foundry Container Cluster Solution provides a flexible and scalable solution for deploying Volt MX Foundry on your on-premises setup, including scaling the installation to multi-node systems and robust logging capabilities.</p>

<p>Volt MX  Foundry Container Cluster Solution On-Premises setup occurs with minimal manual intervention and leverages the following technologies:</p>

<ul>
  <li><strong>Docker</strong> - To package different components as portable container images (with all the required binaries and libs).</li>
  <li><strong>Kubernetes</strong> - To orchestrate and maintain all the running containers. It will also have features like auto-scaling, secrets, deployment upgrades, and rollbacks.</li>
</ul>

<p>You should use this installation if you plan to use docker to setup your on-premise production grade installation of Volt MX Foundry. If you want to setup a developer instance, please refer to the install instructions at <a href="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_single_container/Content/VoltMX_Foundry_Single_Container_Solution_On-Prem_.html">Single container setup (On-Prem)</a>.</p>
      <h2 id="salient-features">
        
        
          <a href="#salient-features" class="anchor-heading" aria-labelledby="salient-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Salient Features
        
        
      </h2>
    

<p>The Volt MX Foundry Container Cluster Solution provides developers with tools to build applications. The Volt MX Foundry Container Cluster Solution has the following features:</p>

<ol>
  <li>Deploys Volt MX Foundry on Kubernetes environment.</li>
  <li>Supports deployment in Linux (CentOS version 7.4).</li>
</ol>
      <h1 id="prerequisites">
        
        
          <a href="#prerequisites" class="anchor-heading" aria-labelledby="prerequisites"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Prerequisites
        
        
      </h1>
    
      <h2 id="software-requirements">
        
        
          <a href="#software-requirements" class="anchor-heading" aria-labelledby="software-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Software Requirements
        
        
      </h2>
    

<ul>
  <li>Install OpenJDK 11.</li>
  <li>Install Zip and Dig.</li>
</ul>
      <h3 id="supported-os-platform">
        
        
          <a href="#supported-os-platform" class="anchor-heading" aria-labelledby="supported-os-platform"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Supported OS Platform
        
        
      </h3>
    

<p>Foundry Kubernetes cluster is supported on CentOS version 7.4.</p>
      <h3 id="supported-application-servers">
        
        
          <a href="#supported-application-servers" class="anchor-heading" aria-labelledby="supported-application-servers"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Supported Application Servers
        
        
      </h3>
    

<p>Volt MX  Foundry Container Cluster Solution supports only the Tomcat Application server. The Tomcat server comes bundled along with the installer.</p>

<p>All the Docker images built for Volt MX Foundry are built using the Tomcat version 9.0.22-jdk11 as the base image.</p>
      <h3 id="supported-databases">
        
        
          <a href="#supported-databases" class="anchor-heading" aria-labelledby="supported-databases"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Supported Databases
        
        
      </h3>
    

<p>Volt MX  Foundry Container Cluster Solution supports the following database servers:</p>

<table>
  <thead>
    <tr>
      <th>Database Type</th>
      <th>Version Supported</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MySQL</td>
      <td>5.6, 5.7, 8.0.17</td>
    </tr>
    <tr>
      <td>Microsoft SQL Server</td>
      <td>2016, 2017</td>
    </tr>
    <tr>
      <td>Oracle</td>
      <td>Oracle 12c (12.1.0.1.0), Oracle 18c</td>
    </tr>
  </tbody>
</table>

<blockquote>
  <p><strong><em>Note:</em></strong> You must have an existing external Database. The Database does not come bundled with the Installer.</p>
</blockquote>
      <h3 id="supported-kubernetes-version">
        
        
          <a href="#supported-kubernetes-version" class="anchor-heading" aria-labelledby="supported-kubernetes-version"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Supported Kubernetes Version
        
        
      </h3>
    

<p>Volt MX  Foundry Container Cluster Solution supports the following Kubernetes package versions:</p>

<table>
  <thead>
    <tr>
      <th>Database Type</th>
      <th>Version Supported</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Docker</td>
      <td>18.09.9</td>
    </tr>
    <tr>
      <td>kubectl</td>
      <td>1.15.4</td>
    </tr>
    <tr>
      <td>kubelet</td>
      <td>1.15.4</td>
    </tr>
    <tr>
      <td>kubeadm</td>
      <td>1.15.4</td>
    </tr>
  </tbody>
</table>
      <h3 id="date-and-time">
        
        
          <a href="#date-and-time" class="anchor-heading" aria-labelledby="date-and-time"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Date and Time
        
        
      </h3>
    

<p>The date and time should be synchronized across all the nodes in a cluster.</p>
      <h2 id="hardware-requirements">
        
        
          <a href="#hardware-requirements" class="anchor-heading" aria-labelledby="hardware-requirements"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Hardware Requirements
        
        
      </h2>
    

<p>This setup requires a minimum of three machines (1 master node, 1 worker node, and 1 load balancer node) for a development environment and five machines (3 masters, 2 worker nodes, and 1 load balancer node) for a production grade environment.</p>

<p>Following is the hardware requirement for a development environment setup.</p>

<table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Requirement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>RAM</td>
      <td>4 GB for master node, 8 GB for worker node</td>
    </tr>
    <tr>
      <td>Internal Storage</td>
      <td>100 GB</td>
    </tr>
    <tr>
      <td>CPU Cores</td>
      <td>Dual or above.</td>
    </tr>
  </tbody>
</table>

<p>Following is the hardware requirement for a production grade cluster.</p>

<table>
  <thead>
    <tr>
      <th>Component</th>
      <th>Requirement</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>RAM</td>
      <td>20 GB</td>
    </tr>
    <tr>
      <td>Internal Storage</td>
      <td>100 GB</td>
    </tr>
    <tr>
      <td>CPU Cores</td>
      <td>Dual or above.</td>
    </tr>
  </tbody>
</table>
      <h2 id="firewall-settings">
        
        
          <a href="#firewall-settings" class="anchor-heading" aria-labelledby="firewall-settings"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Firewall Settings
        
        
      </h2>
    

<p>You must ensure that the following ports are used to expose the required services when a Firewall is enabled on your system.</p>
      <h3 id="required-open-ports">
        
        
          <a href="#required-open-ports" class="anchor-heading" aria-labelledby="required-open-ports"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Required Open Ports
        
        
      </h3>
    

<p>The following port ranges must be opened before installing Foundry on all nodes in a cluster.</p>

<ul>
  <li>30000-32767/tcp</li>
  <li>6443-10252/tcp</li>
  <li>2379-2380/tcp</li>
</ul>

<p>Run the following commands to open the ports:</p>

<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo firewall-cmd --permanent --add-port=30000-32767/tcp --zone=public   
sudo firewall-cmd --permanent --add-port=6443-10252/tcp --zone=public   
sudo firewall-cmd --permanent --add-port=2379-2380/tcp --zone=public</code></pre></figure>

<p>The following ports must be opened explicitly when a firewall is enabled on all nodes. These are required by Weave CNI to avoid hostname issues.</p>

<ul>
  <li>6783/udp, 6783/tcp</li>
  <li>6784/udp, 6784/tcp</li>
</ul>

<p>Run the following commands to open the ports:</p>

<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo firewall-cmd --permanent --add-port=6783/udp --zone=public  
sudo firewall-cmd --permanent --add-port=6783/tcp --zone=public  
sudo firewall-cmd --permanent --add-port=6784/udp --zone=public  
sudo firewall-cmd --permanent --add-port=6784/tcp --zone=public</code></pre></figure>

<p>The following ports should be opened on the load-balancer node.</p>

<ul>
  <li>443/tcp</li>
  <li>80/tcp</li>
</ul>

<p>Run the following commands to open the ports:</p>

<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo firewall-cmd --permanent --add-port=443/tcp --zone=public  
sudo firewall-cmd --permanent --add-port=80/tcp --zone=public</code></pre></figure>

<p>At the end run the following command to load the new firewall settings.</p>

<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo firewall-cmd --reload</code></pre></figure>

<p>Some of the app services in Foundry cluster use specific node ports to expose the services. Therefore, the ports mentioned below must be free on all nodes before installing the Foundry Kubernetes cluster.</p>

<table>
  <thead>
    <tr>
      <th>Ports</th>
      <th>Services using the Port</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>30000</td>
      <td>Prometheus</td>
    </tr>
    <tr>
      <td>31000</td>
      <td>Kubernetes Dashboard. (The default port value can be changed by changing value of KUBERNETES_DASHBOARD_PORT in the config.properties file)</td>
    </tr>
    <tr>
      <td>30200</td>
      <td>Internal nginx load balancer</td>
    </tr>
    <tr>
      <td>30300</td>
      <td>Kibana logging tool</td>
    </tr>
    <tr>
      <td>30400</td>
      <td>Grafana monitoring tool</td>
    </tr>
  </tbody>
</table>
      <h1 id="preinstallation-tasks">
        
        
          <a href="#preinstallation-tasks" class="anchor-heading" aria-labelledby="preinstallation-tasks"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Preinstallation Tasks
        
        
      </h1>
    

<p>Following are the preinstallation tasks to be performed on all nodes before starting installation.</p>

<ol>
  <li>All Kubernetes masters and nodes must have the swap disabled. This is the recommended deployment as per the Kubernetes community.
    <ol>
      <li>Run the following command to disable swap.</li>
    </ol>
  </li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo swapoff -a
        </code></pre></figure>
<p><br />
    2.  Run the following command to update fstab so that the swap remains disabled even after a reboot.</p>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo sed -i '/ swap / s/^\(.*\)$/#\1/g' /etc/fstab
        </code></pre></figure>
<p><br />
    3.  Restart the node after the swap is disabled.</p>
<ol>
  <li>Download Foundry container artifacts from <a href="https://community.hclvoltmx.com/downloads">VoltMX Downloads</a>.</li>
  <li>If the Foundry cluster is being reinstalled, you must execute the following command on all nodes and delete the <strong>.kube</strong> folder present in the root directory from all the master nodes.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo kubeadm reset
    </code></pre></figure>
<p><br /></p>
      <h1 id="architecture">
        
        
          <a href="#architecture" class="anchor-heading" aria-labelledby="architecture"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Architecture
        
        
      </h1>
    

<p>Following is the architecture diagram of the Volt MX Foundry Container Cluster Solution.</p>

<p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/ArchDiagram1_767x344.png" alt="" /></p>

<p>The complete Volt MX Foundry Container Cluster Solution will have a total of six pods.</p>

<p>Following is the list of pods present in the VoltMX Foundry Container Cluster Solution:</p>

<ul>
  <li>Console</li>
  <li>API Developer Portal</li>
  <li>Identity</li>
  <li>Integration</li>
  <li>Engagement</li>
  <li>Database (exits on completion of the Database scripts execution)</li>
</ul>

<p>The following is the list of Docker images used for the pods in the VoltMX Foundry Container Cluster Solution:</p>

<ul>
  <li>Foundry Console (Contains <code class="language-plaintext highlighter-rouge">mfconsole.war</code>,   <code class="language-plaintext highlighter-rouge">workspace.war</code>,  and  <code class="language-plaintext highlighter-rouge">accounts.war</code>)</li>
  <li>API Developer Portal (Contains <code class="language-plaintext highlighter-rouge">apiportal.war</code>)</li>
  <li>Identity (Contains <code class="language-plaintext highlighter-rouge">authService.war</code>)</li>
  <li>Integration (Contains <code class="language-plaintext highlighter-rouge">admin.war</code>, <code class="language-plaintext highlighter-rouge"> services.war</code>,  <code class="language-plaintext highlighter-rouge"> middleware.war</code>, and <code class="language-plaintext highlighter-rouge">apps.war</code>)</li>
  <li>Engagement (Contains <code class="language-plaintext highlighter-rouge">vpns.war</code>)</li>
  <li>Database (Contains Database migration scripts)</li>
</ul>

<p>All these images are pushed into the Volt MX Foundry Docker Hub registry:<br />
<a href="https://hub.docker.com/r/voltmxfoundry/">hub.docker.com</a></p>

<p>Volt MX  Foundry Container Cluster Solution downloadable bundle contains the following directories and files:</p>

<ul>
  <li><strong>install-foundry.sh</strong> - Installation script</li>
  <li><strong>install-actions.sh</strong> - Installation actions script which is internally used by install-foundry.sh.</li>
  <li><strong>templates</strong> - Directory containing the config template files</li>
  <li><strong>add-ons directory</strong>- Directory containing additional deployments and configurations for the Kubernetes cluster.</li>
  <li><strong>config.properties</strong> - Properties file to pass the inputs to install-foundry.sh instead of giving inputs in shell prompts.</li>
  <li><strong>lib</strong> - Folder containing the foundry-utils.jar file.</li>
  <li><strong>resources</strong> - Folder containing a few resources required for the Kubernetes CNI.</li>
  <li><strong>setup-loadbalancer.sh</strong> - Needs to be executed on a different machine to support the load balancer.</li>
</ul>
      <h2 id="installation-types">
        
        
          <a href="#installation-types" class="anchor-heading" aria-labelledby="installation-types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation Types
        
        
      </h2>
    

<p>Inputs for installation can be gathered through two modes. Any of the following modes can be chosen for installation.</p>

<ul>
  <li>
    <p><strong>Command Line</strong> - Volt MX Foundry Container Cluster Solution can be installed using the bundled install shell script, which will prompt the user for required values.</p>

    <p>The syntax for installing through the Command Line:</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo ./install-foundry.sh
    </code></pre></figure>
<p><br /><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/kb1.png" alt="" /></p>

<ul>
  <li>
    <p><strong>Silent Installation</strong> - The installation script also supports silent installation if the config.properties file is passed as an argument (for example, /path/install-foundry.sh config.properties). Using this, you can have additional ability to pass custom Tomcat JAVA_OPTS, Heap memory settings, and time-zone settings as well.</p>

    <p>The syntax for installing using the config.properties:</p>
  </li>
</ul>

<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo ./install-foundry.sh config.properties
    </code></pre></figure>
      <h1 id="configuration">
        
        
          <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration
        
        
      </h1>
    

<p>The following parameters are to be provided by the user during Installation:</p>

<ol>
  <li>
    <p><strong>INSTALL_ENV_NAME</strong> - The install environment name can be anything in lowercase (String). The possible values are: <code class="language-plaintext highlighter-rouge">dev</code>, <code class="language-plaintext highlighter-rouge">qa</code>, <code class="language-plaintext highlighter-rouge">prod</code>, or <code class="language-plaintext highlighter-rouge">eastusprod</code>.</p>

    <blockquote>
      <p><strong><em>Note:</em></strong> The Install Environment Name must not contain numbers.</p>
    </blockquote>
  </li>
  <li>
    <p><strong>Install Components</strong>: The following properties must be set to either Y (yes) or N (no). If ALL_COMPONENTS_ENABLED is set to Y, the rest of the inputs can be left empty. If ALL_COMPONENTS_ENABLED is set to N then at least one of the following input properties must be set to Y.</p>

    <ul>
      <li>ALL_COMPONENTS_ENABLED</li>
      <li>INTEGRATION_ENABLED</li>
      <li>IDENTITY_ENABLED</li>
      <li>MESSAGING_ENABLED</li>
      <li>CONSOLE_ENABLED</li>
      <li>APIPORTAL_ENABLED</li>
    </ul>
  </li>
  <li><strong>Application Server Details</strong>
    <ul>
      <li>
        <p><strong>SERVER_DOMAIN_NAME</strong>: The <strong>Domain Name</strong> for Volt MX Foundry. This value should be the hostname of the LoadBalancer. For example: abc.companyname (DNS name).</p>

        <blockquote>
          <p><strong><em>Note:</em></strong> Domain name cannot be an IP address or ‘localhost’.</p>
        </blockquote>
      </li>
      <li><strong>COM_PROTOCOL</strong>: The communication protocol for Volt MX Foundry. This value can be either http or https.</li>
      <li><strong>HTTPS_CERT_FILE</strong>: The path to the existing certificate and key files. This value can be empty if the communication protocol is HTTP. The path should point to a valid pem file.</li>
      <li><strong>HTTPS_KEY_FILE</strong>: The path to the existing certificate and key files. This value can be empty if the communication protocol is HTTP. The path should point to a valid pem file.</li>
    </ul>
  </li>
  <li><strong>Database Details</strong>:
    <ul>
      <li><strong>DB_TYPE</strong> - This is the Database type you want to use for hosting Volt MX Foundry. The possible values are:
        <ul>
          <li>For MySQL DB server: <code class="language-plaintext highlighter-rouge">mysql</code></li>
          <li>For Azure MSSQL or SQL Server: <code class="language-plaintext highlighter-rouge">sqlserver</code></li>
          <li>For Oracle DB server: <code class="language-plaintext highlighter-rouge">oracle</code></li>
        </ul>
      </li>
      <li><strong>DB_HOST</strong> - This is the Database Server hostname used to connect to the Database Server.</li>
    </ul>

    <blockquote>
      <p><strong><em>Note:</em></strong> If the Database Hostname is an IP address, it should be a static IP address.</p>
    </blockquote>

    <ul>
      <li><strong>DB_PORT</strong>– This is the Port Number used to connect to the Database Server. This can be empty for cloud manage service.</li>
      <li><strong>DB_USER</strong> - This is the Database Username used to connect to the Database Server.</li>
      <li><strong>DB_PASS</strong> - This is the Database Password used to connect to the Database Server.</li>
      <li><strong>DB_PREFIX</strong> – This is the Database server prefix for Volt MX Foundry Schemas/Databases.</li>
      <li><strong>DB_SUFFIX</strong> – This is the Database server suffix for Volt MX Foundry Schemas/Databases.</li>
    </ul>

    <blockquote>
      <p><strong>Note:</strong></p>
      <ul>
        <li>Database Prefix and Suffix are optional inputs.</li>
        <li>In case of upgrade, ensure that the values of the Database Prefix and Suffix that you provide are the same as you had provided during the initial installation.</li>
      </ul>
    </blockquote>

    <ul>
      <li>If <strong>DB_TYPE</strong> is set as <strong>oracle</strong>, the following String values need to be provided:
        <ul>
          <li><strong>DB_DATA_TS</strong>: Database Data tablespace name.</li>
          <li><strong>DB_INDEX_TS</strong>: Database Index tablespace name.</li>
          <li><strong>DB_LOB_TS</strong>: Database LOB tablespace name.</li>
          <li><strong>DB_SERVICE</strong>: Database service name.</li>
        </ul>
      </li>
      <li>
        <p><strong>USE_EXISTING_DB</strong>: If you want to use an existing databases from a previous Volt MX Foundry instance set this variable to Y. If not the set the USE_EXISTING_DB variable to N.</p>

        <p>You must provide the location of the previously installed artifacts (the location should contain upgrade.properties file).</p>

        <p>For example: <strong>PREVIOUS_INSTALL_LOCATION</strong> = <code class="language-plaintext highlighter-rouge">/C/voltmx-foundry-containers-onprem/kubernetes</code>.</p>
      </li>
    </ul>
  </li>
  <li><strong>VoltMX Foundry Account Registration Details</strong>: The following properties are required for owner registration. It is not required for an upgrade. If OWNER_REGISTRATION_REQUIRED is set to <strong>Y</strong> (yes), then you must provide all the following inputs:
    <ul>
      <li><strong>OWNER_REGISTRATION_REQUIRED</strong> - Y/N.</li>
      <li><strong>OWNER_USER_ID</strong> – E-mail ID used for Volt MX Foundry Registration.</li>
      <li><strong>OWNER_PASSWORD</strong> – Password used for Volt MX Foundry Registration.</li>
      <li><strong>OWNER_FIRST_NAME</strong> – First Name used for Volt MX Foundry Registration.</li>
      <li><strong>OWNER_LAST_NAME</strong> – Last Name used for Volt MX Foundry Registration.</li>
      <li><strong>OWNER_ENV_NAME</strong> – Environment name to which the generated applications should be published.</li>
    </ul>
  </li>
  <li>
    <p><strong>TIME_ZONE</strong> - The Time Zone of the Database used for Volt MX Foundry installation. The Time Zone variable must be set to maintain consistency between the Application server and the Database server. For determining what value to set for the time zone you can refer to <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">List of tz database time zones</a> on Wikipedia.</p>

    <blockquote>
      <p><strong><em>Note:</em></strong> The Time Zone is an optional value. If you do not provide any Time Zone, it is set to Etc/UTC.</p>
    </blockquote>
  </li>
  <li><strong>Readiness and Liveness Probes Details</strong>: Following variables are set with default values in seconds. You can modify them in the config.properties file.
    <ul>
      <li>IDENTITY_READINESS_INIT_DELAY: The readiness probe initial delay for Identity, in seconds. The default value is 180.</li>
      <li>IDENTITY_LIVENESS_INIT_DELAY: The liveness probe initial delay for Identity, in seconds. The default value is 300.</li>
      <li>CONSOLE_READINESS_INIT_DELAY: The readiness probe initial delay for Console, in seconds. The default value is 300.</li>
      <li>CONSOLE_LIVENESS_INIT_DELAY: Liveness probe initial delay for Console, in seconds. The default value is 600.</li>
      <li>INTEGRATION_READINESS_INIT_DELAY: The readiness probe initial delay for Integration, in seconds. The default value is 300.</li>
      <li>INTEGRATION_LIVENESS_INIT_DELAY: Liveness probe initial delay for Integration, in seconds. The default value is 600.</li>
      <li>ENGAGEMENT_READINESS_INIT_DELAY: The readiness probe initial delay for Engagement, in seconds. The default value is 180.</li>
      <li>ENGAGEMENT_LIVENESS_INIT_DELAY: The liveness probe initial delay for Engagement, in seconds. The default value is 300.</li>
    </ul>
  </li>
  <li><strong>Minimum and Maximum RAM percentage Details</strong>: The following variables are set with default String values. You can modify them in the config.properties file.
    <ul>
      <li>CONSOLE_MIN_RAM_PERCENTAGE: Minimum RAM percentage for Console. The default value is “50”.</li>
      <li>CONSOLE_MAX_RAM_PERCENTAGE: Maximum RAM percentage for Console. The default value is “80”.</li>
      <li>ENGAGEMENT_MIN_RAM_PERCENTAGE: Minimum RAM percentage for Engagement. The default value is “50”.</li>
      <li>ENGAGEMENT_MAX_RAM_PERCENTAGE: Maximum RAM percentage for Engagement. The default value is “80”.</li>
      <li>IDENTITY_MIN_RAM_PERCENTAGE: Minimum RAM percentage for Identity. The default value is “50”.</li>
      <li>IDENTITY_MAX_RAM_PERCENTAGE: Maximum RAM percentage for Identity. The default value is “80”.</li>
      <li>INTEGRATION_MIN_RAM_PERCENTAGE: Minimum RAM percentage for Integration. The default value is “50”.</li>
      <li>INTEGRATION_MAX_RAM_PERCENTAGE: Maximum RAM percentage for Integration. The default value is “80”.</li>
      <li>APIPORTAL_MIN_RAM_PERCENTAGE: Minimum RAM percentage for API Portal. The default value is “50”.</li>
      <li>APIPORTAL_MAX_RAM_PERCENTAGE: Maximum RAM percentage for API Portal. The default value is “80”.</li>
    </ul>
  </li>
  <li><strong>Container resource limits for memory and CPU</strong>: The following variables are set with default String values. You can modify them in the config.properties file.
    <ul>
      <li>IDENTITY_RESOURCE_MEMORY_LIMIT: The resource memory limit for Identity. The default value is “1.2G”.</li>
      <li>IDENTITY_RESOURCE_REQUESTS_MEMORY: The resource memory requests for Identity. The default value is “1G”.</li>
      <li>IDENTITY_RESOURCE_REQUESTS_CPU: The resource CPU requests for Identity. The default value is “200m”.</li>
      <li>CONSOLE_RESOURCE_MEMORY_LIMIT: The resource memory limit for Console. The default value is “2.2G”.</li>
      <li>CONSOLE_RESOURCE_REQUESTS_MEMORY: The resource memory requests for Console. The default value is “2G”.</li>
      <li>CONSOLE_RESOURCE_REQUESTS_CPU: The resource CPU requests for Console. The default value is “300m”.</li>
      <li>APIPORTAL_RESOURCE_MEMORY_LIMIT: The resource memory limit for API Portal. The default value is “1.2G”,</li>
      <li>APIPORTAL_RESOURCE_REQUESTS_MEMORY: The resource memory requests for API Portal. The default value is “1G”.</li>
      <li>APIPORTAL_RESOURCE_REQUESTS_CPU: The resource CPU requests for API Portal. The default value is “200m”,</li>
      <li>INTEGRATION_RESOURCE_MEMORY_LIMIT: The resource memory limit for Integration. The default value is “2.2G”.</li>
      <li>INTEGRATION_RESOURCE_REQUESTS_MEMORY: The resource memory requests for Integration. The default value is “2G”.</li>
      <li>INTEGRATION_RESOURCE_REQUESTS_CPU: The resource CPU requests for Integration. The default value is “300m”.</li>
      <li>ENGAGEMENT_RESOURCE_MEMORY_LIMIT: The resource memory limit for Engagement. The default value is “1.2G”.</li>
      <li>ENGAGEMENT_RESOURCE_REQUESTS_MEMORY: The resource memory requests for Engagement. The default value is “1G”.</li>
      <li>ENGAGEMENT_RESOURCE_REQUESTS_CPU: The resource CPU requests for Engagement. The default value is “200m”.</li>
    </ul>
  </li>
  <li><strong>Custom JAVA_OPTS Details</strong>: The following variables can be set with default String values. You can modify them in the config.properties file.
    <ul>
      <li>CONSOLE_CUSTOM_JAVA_OPTS: The custom JAVA_OPTS for Console.</li>
      <li>ENGAGEMENT_CUSTOM_JAVA_OPTS: The custom JAVA_OPTS for Engagement</li>
      <li>IDENTITY_CUSTOM_JAVA_OPTS: The custom JAVA_OPTS for Identity.</li>
      <li>INTEGRATION_CUSTOM_JAVA_OPTS: The custom JAVA_OPTS for Integration.</li>
      <li>APIPORTAL_CUSTOM_JAVA_OPTS: The custom JAVA_OPTS for API Portal.</li>
    </ul>
  </li>
  <li><strong>Number of instances to be deployed for each component</strong>: The following variables can be set with default integer values. You can modify them in the config.properties file.
    <ul>
      <li>IDENTITY_REPLICAS: The number of instances of Identity. The default value is 1.</li>
      <li>CONSOLE_REPLICAS: The number of instances of Console. The default value is 1.</li>
      <li>APIPORTAL_REPLICAS: The number of instances of API Portal. The default value is 1.</li>
      <li>INTEGRATION_REPLICAS: The number of instances of Integration. The default value is 1.</li>
      <li>ENGAGEMENT_REPLICAS: The number of instances of Engagement. The default value is 1.</li>
    </ul>
  </li>
  <li>
    <p>The port on which the <strong>Kubernetes Dashboard</strong> can be accessed:</p>

    <ul>
      <li>KUBERNETES_DASHBOARD_PORT: The default value is 31000.</li>
    </ul>
  </li>
</ol>
      <h1 id="installation">
        
        
          <a href="#installation" class="anchor-heading" aria-labelledby="installation"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installation
        
        
      </h1>
    

<p>Run the Volt MX Foundry Container Cluster install script to generate and deploy Volt MX Foundry containers.</p>

<p><strong>Steps to Install Volt MX Foundry Container Cluster Solution on an On-Premises setup:</strong></p>

<ol>
  <li>
    <p><a href="#setting-up-haproxy-loadbalancer">Setting up HAProxy LoadBalancer</a></p>

    <blockquote>
      <p><strong><em>Note:</em></strong> This step is optional if you have your own load balancer setup. You must provide the pre-configured load balancer hostname as the SERVER_DOMAIN_NAME input in the installation process instead of performing the following instructions.</p>
    </blockquote>
  </li>
  <li><a href="#setting-up-cluster">Setting up Cluster</a></li>
  <li><a href="#resuming-installation-in-master-node">Resuming installation in Master Node</a></li>
</ol>
      <h2 id="setting-up-haproxy-loadbalancer">
        
        
          <a href="#setting-up-haproxy-loadbalancer" class="anchor-heading" aria-labelledby="setting-up-haproxy-loadbalancer"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up HAProxy LoadBalancer
        
        
      </h2>
    

<p>Before starting the cluster installation, a loadbalancer must be set up. Without the loadbalancer the cluster setup cannot be started. The HAProxy is a certified external loadbalancer for the Foundry container cluster setup. Installation and configuration of HAProxy is taken care of by the script. Initially, the installation script configures the loadbalancer with one master. Going forward you can edit the <code class="language-plaintext highlighter-rouge">haproxy.cfg</code> file to add other masters to the loadbalancer.</p>

<p>Perform the following steps to setup the HAProxy loadbalancer through a script file.</p>

<ol>
  <li>Download the <strong>voltmx-foundry-containers-onprem_9.0.0.0_GA.zip</strong> from the <a href="https://community.hclvoltmx.com/downloads">Download Link</a> and extract it.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo unzip VoltMXFoundryContainersOnPrem-9.0.0.0_GA.zip 
    -d VoltMXFoundryContainerOnPrem-9.0.0.0_GA
    </code></pre></figure>

<ol>
  <li>Navigate to foundry container artifact folder.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">cd VoltMXFoundryContainerOnPrem-9.0.0.0_GA
    </code></pre></figure>

<ol>
  <li>Run <code class="language-plaintext highlighter-rouge">setup-loadbalancer.sh</code>. It prompts for master node hostname and communication protocol. The loadbalancer is then installed and configured.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo ./setup-loadbalancer.sh
    </code></pre></figure>

<ol>
  <li>
    <table>
      <tbody>
        <tr>
          <td>Check if haproxy gets successfully started by executing the <code class="language-plaintext highlighter-rouge">systemctl status haproxy</code> command. If it throws the “_cannot bind socket [0.0.0.0:xxxx</td>
          <td>https://stackoverflow.com/questions/34793885/haproxy-cannot-bind-socket-0-0-0-08888]_” error. Run the following command and restart haproxy.</td>
        </tr>
      </tbody>
    </table>
  </li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">setsebool -P haproxy_connect_any=1
    </code></pre></figure>

<p>Before setting up master nodes, all the IPs of master nodes should be configured in HAProxy loadbalancer. If any master node IP is not listed and you try to set the master node, that node will not be added to cluster. To add master node IPs, edit the file <code class="language-plaintext highlighter-rouge">/etc/haproxy/haproxy.cfg</code> and make the following two changes for each master node IP to be added.</p>

<ol>
  <li>In the <strong>Configure HAProxy SecureBackend</strong> section, add the following line at the end. List all the other master node IPs in the same way.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">server k8s-api-2 &lt;IP-ADDRESS&gt;:6443 check
    </code></pre></figure>

<ol>
  <li>In the <strong>Configure HAProxy Foundry Backend</strong> section, add the following line at the end. List all the other master node IPs in the same way.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">server foundry-1 &lt;IP-ADDRESS&gt;:30200 check
    </code></pre></figure>
      <h2 id="setting-up-cluster">
        
        
          <a href="#setting-up-cluster" class="anchor-heading" aria-labelledby="setting-up-cluster"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Setting up Cluster
        
        
      </h2>
    

<p>In setting up a cluster a minimum of one master can be configured. To improve failure tolerance and ensure cluster availability it is recommended to have an odd number (minimum three) of master nodes. To start cluster setup choose one node as starting point of installation which should be the master node.</p>

<ol>
  <li>Download the <strong>voltmx-foundry-containers-onprem_9.0.0.0_GA.zip</strong> from the <a href="https://community.hclvoltmx.com/downloads">Download Link</a> and extract it.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo unzip VoltMXFoundryContainersOnPrem-9.0.0.0_GA.zip 
    -d VoltMXFoundryContainerOnPrem-9.0.0.0_GA
    </code></pre></figure>

<ol>
  <li>Navigate to foundry container artifact folder.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">cd VoltMXFoundryContainerOnPrem-9.0.0.0_GA
    </code></pre></figure>

<ol>
  <li>Run the following command to setup the master. It downloads and installs cluster packages, initializes kubeadm, sets up Weave CNI, generates token and waits for the worker node to join the master to proceed further.</li>
</ol>
<figure class="highlight"><pre><code class="language-voltmx" data-lang="voltmx">sudo ./install-foundry.sh config.properties
    </code></pre></figure>

<blockquote>
  <p><strong><em>Note:</em></strong> You must provide <strong>execute</strong> permissions to run the <code class="language-plaintext highlighter-rouge">install-foundry.sh</code> file on Linux.</p>
</blockquote>

<p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/home1.PNG" alt="" /></p>

<ol>
  <li>To join other nodes as master/worker, copy the setup-node.zip file which is available in the Foundry Container artifact folder(VoltMXFoundryContainerOnPrem-9.0.0.0_GA) into the node to join as the master/worker and then perform the following steps.
    <ol>
      <li>
        <p>Extract the <code class="language-plaintext highlighter-rouge">setup-nodes.zip</code> file.</p>

        <p><code class="language-plaintext highlighter-rouge">sudo unzip setup-node.zip -d setup-node</code></p>
      </li>
      <li>
        <p>Navigate to the <code class="language-plaintext highlighter-rouge">setup-nodes</code> folder.</p>

        <p><code class="language-plaintext highlighter-rouge">cd setup-node</code></p>
      </li>
      <li>
        <p>Execute the following command.</p>

        <p>For Master:</p>

        <p><code class="language-plaintext highlighter-rouge">sudo ./setup-node.sh control-plane</code></p>

        <p>For Worker:</p>

        <p><code class="language-plaintext highlighter-rouge">sudo ./setup-node.sh</code></p>
      </li>
    </ol>
  </li>
  <li>
    <p>After the cluster setup is done to get the list of nodes in cluster, use below command.</p>

    <p><code class="language-plaintext highlighter-rouge">kubectl get nodes</code></p>

    <p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/nodes.PNG" alt="" /></p>
  </li>
</ol>
      <h2 id="resuming-installation-in-master-node">
        
        
          <a href="#resuming-installation-in-master-node" class="anchor-heading" aria-labelledby="resuming-installation-in-master-node"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resuming Installation In Master Node
        
        
      </h2>
    

<p>After joining masters and worker nodes, you must press enter in the master node terminal to resume the installation.</p>

<ol>
  <li>
    <p>Kubernetes Dashboard and DB Migrations</p>

    <p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/db.PNG" alt="" /></p>
  </li>
  <li>
    <p>Foundry and Ingress configuration</p>

    <p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/foundryandingress.PNG" alt="" /></p>
  </li>
  <li>
    <p>EFK , Prometheus, and Grafana Monitoring tool configuration.</p>

    <p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/efkandmonitoring.PNG" alt="" /></p>
  </li>
  <li>
    <p>Foundry healthcheck</p>

    <p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/healthcheck.PNG" alt="" /></p>
  </li>
  <li>
    <p>Run the following command to check status of pods.</p>

    <p><code class="language-plaintext highlighter-rouge">sudo kubectl get pods</code></p>

    <p><img src="/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Resources/Images/podslist.PNG" alt="" /></p>
  </li>
</ol>
      <h2 id="known-issues-and-limitations">
        
        
          <a href="#known-issues-and-limitations" class="anchor-heading" aria-labelledby="known-issues-and-limitations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Known Issues and Limitations
        
        
      </h2>
    

<p>Volt MX  Foundry Container Cluster Solution has the following known issues and limitations:</p>

<ul>
  <li>Support for <strong>SPA / Desktop Web</strong> is only available for zipped SPA apps, not for WARs.</li>
</ul>

        

        

        
        
         
            <!--<p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2017-2020 HCL Digital Solutions</p>-->


            
              <div class="d-flex mt-2">
                
                
              </div>
            
          </footer>
        

      </div>
    </div>

    
      

      <div class="search-overlay"></div>
    

    
  </div>

  <!-- end main  -->

  
  <div class="split-hold" >
    <div class="split__bar1" ></div>
    <div class="closeclick closeright" id="right-close"></div>
  </div>
    <div class="right-menu scrollable-container" >
      <div class="scrollable">
        <nav role="navigation" aria-label="Main" id="sub-site-nav" class="site-nav" >
<ul class="nav-list">
  

    <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Introduction.html" class="nav-list-link">Volt MX Foundry Installation Guide - Containers Solution</a>
  
      
</li>


    <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
        <use xlink:href="#svg-arrow-right"></use>
        </svg>
      </a><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#overview" class="nav-list-link">Overview</a>
  
      <ul class="nav-list "><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#salient-features" class="nav-list-link">Salient Features</a>

  
 </li>
  

</ul>


</li>


    <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
        <use xlink:href="#svg-arrow-right"></use>
        </svg>
      </a><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#prerequisites" class="nav-list-link">Prerequisites</a>
  
      <ul class="nav-list "><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#software-requirements" class="nav-list-link">Software Requirements</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#H/w_Req" class="nav-list-link">Hardware Requirements</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#firewall-settings" class="nav-list-link">Firewall Settings</a>

  
 </li>
  

</ul>


</li>


    <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#preinstallation-tasks" class="nav-list-link">Preinstallation Tasks</a>
  
      
</li>


    <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
        <use xlink:href="#svg-arrow-right"></use>
        </svg>
      </a><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#architecture" class="nav-list-link">Architecture</a>
  
      <ul class="nav-list "><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#installation-types" class="nav-list-link">Installation Types</a>

  
 </li>
  

</ul>


</li>


    <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#configuration" class="nav-list-link">Configuration</a>
  
      
</li>


    <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
        <use xlink:href="#svg-arrow-right"></use>
        </svg>
      </a><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#installation" class="nav-list-link">Installation</a>
  
      <ul class="nav-list "><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/VoltMX_Foundry_Containers_Solution_On-Prem.html#known-issues-and-limitations" class="nav-list-link">Limitations</a>

  
 </li>
  

</ul>


</li>


    <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
        <use xlink:href="#svg-arrow-right"></use>
        </svg>
      </a><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_PostInstallation.html" class="nav-list-link">Post Installation Tasks</a>
  
      <ul class="nav-list "><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_PostInstallation.html#configuring-kibana-dashboard" class="nav-list-link">Configuring Kibana</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_PostInstallation.html#configuring-grafana-monitoring-tool" class="nav-list-link">Configuring Grafana</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_PostInstallation.html#configuring-alert-manager" class="nav-list-link">Configuring Alert Manager</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_PostInstallation.html#how-to-access-the-kubernetes-dashboard" class="nav-list-link">How to access Kubernetes Dashboard</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_PostInstallation.html#how-to-upgrade-individual-foundry-components" class="nav-list-link">How to Upgrade Individual Foundry Components</a>

  
 </li>
  

</ul>


</li>


    <li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24">
        <use xlink:href="#svg-arrow-right"></use>
        </svg>
      </a><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html" class="nav-list-link">Appendices</a>
  
      <ul class="nav-list "><li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html#enabling-metrics-server" class="nav-list-link">Enabling Metrics Server</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html#enabling-kuberhealthy" class="nav-list-link">Enabling Kuberhealthy</a>

  
 </li>
  <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_Appendices.html#enabling-stern" class="nav-list-link">Enabling Stern</a>

  
 </li>
  

</ul>


</li>


    <li class="nav-list-item"><a href="https://hcl-tech-software.github.io/volt-mx-docs/docs/documentation/Foundry/voltmxfoundry_containers_solution_on-prem/Content/Containers_Solution_FAQs_and_Troubleshooting.html" class="nav-list-link">FAQs and Troubleshooting</a>
  
      
</li>

</ul>

</nav>


      </div>
  </div></div>





 <!-- footer from footer html -->
 <footer>

    <!-- The Modal -->
<div id="copyright-modal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close">&times;</span>
      <p>
        © Copyright HCL America, Inc., 2021 - All rights reserved.
      </p>
      <p>This document contains information proprietary to HCL., is bound by the HCL license agreements, and may not be used except in the context of understanding the use and methods of HCL., software without prior, express, written permission. HCL, Empowering Everywhere, HCL Foundry, HCL Flare, and HCL Iris are trademarks of HCL. MobileFoundry is a registered trademark of HCL. Microsoft, the Microsoft logo, Internet Explorer, Windows, and Windows Vista are registered trademarks of Microsoft Corporation. Apple, the Apple logo, iTunes, iPhone, iPad, OS X, Objective-C, Safari, Apple Pay, Apple Watch, and Xcode are trademarks or registered trademarks of Apple, Inc. Google, the Google logo, Android, and the Android logo are registered trademarks of Google, Inc. Chrome is a trademark of Google, Inc. BlackBerry, PlayBook, Research in Motion, and RIM are registered trademarks of BlackBerry. SAP® and SAP® Business Suite® are registered trademarks of SAP SE in Germany and in several other countries. All other terms, trademarks, or service marks mentioned in this document have been capitalized and are to be considered the property of their respective owners.</p>
    </div>
  
  </div>

  <div id="revised-terms" class="modal " style="font-size: 14px;">
    <div class="modal-content scrollable-container">
      <div style="background-color: #333; color: #fff; padding: 10px;">
      <h2>Revised Volt MX product names, APIs, and Others</h2>
      <span class="close2">×</span>
    </div>
    <div class="modal-main-content scrollable">
      <p >
        This document describes the revised list of Volt MX product names, APIs, and others.
      </p>
      <ul class="inline-bullets">
        <li>Product name</li>
        <li>API</li>
        <li>Other</li>
      </ul>
    <p style="clear: both;">
      The following tables show the mapping of Volt MX new terms versus Temenos old terms.
    </p>

    <h3>Product name</h3>
    This table shows the new Volt MX product names versus old Temenos product names.
    <table>
      <tr>
        <th>New Terms (Volt MX)</th>
        <th>Old Terms (Temenos)</th>
      </tr>
      <tr>
        <td>Volt MX</td>
        <td>Quantum</td>
      </tr>
      <tr>
        <td>Iris</td>
        <td>Visualizer</td>
      </tr>
      <tr>
        <td>Foundry</td>
        <td>Mobile Fabric</td>
      </tr>
      <tr>
        <td>Foundry</td>
        <td>Fabric</td>
      </tr>
      <tr>
        <td>Flare</td>
        <td>Nitro</td>
      </tr>
      
    </table>


    <a name="api_names"><h3>API</h3></a>
    This table shows the new Volt MX APIs namespaces versus the old Temenos APIs namespaces, along with examples. The new namespaces are used throughout this documentation; however, if you use a Temenos branded version older than 9.2, you must keep using the old Temenos namespaces.
    <table>
      <tr>
        <th>New Namespace (Volt MX)</th>
        <th>Old Namespace (Temenos)</th>
      </tr>
	  <tr>
	    <td>voltmx</td>
		<td>kony</td>
	  </tr>
	  <tr>
	    <td>com.hcl.voltmx</td>
		<td>com.konylabs</td>
	  </tr>
	  <tr>
	    <td>VMXFoundry</td>
		<td>KNYMobileFabric</td>
	  </tr>
	  <tr>
	  <td colspan="2"  style="text-align:center"><b>Examples</b></td>
	  <td/>
      <tr>
        <td>voltmx.ui.Alert</td>
        <td>kony.ui.Alert</td>
      </tr>
      <tr>
        <td>voltmx.os.deviceInfo</td>
        <td>kony.os.deviceInfo</td>
      </tr>
      <tr>
        <td>com.hcl.voltmx.middleware.api</td>
        <td>com.konylabs.middleware.api</td>
      </tr>
      <tr>
        <td>com.hcl.voltmx.middleware.dataobject</td>
        <td>com.konylabs.middleware.dataobject</td>
      </tr>
	  <tr>
	    <td>VMXFoundry.OfflineObjects.drop</td>
		<td>KNYMobileFabric.OfflineObjects.drop</td>
	  </tr>
    </table>

    <h3>Other</h3>
    This table shows the new Volt MX terms versus old Temenos terms.
    <table>
      <tr>
        <th>New Terms (Volt MX)</th>
        <th>Old Terms (Temenos)</th>
      </tr>
      <tr>
        <td>vfcli.jar</td>
        <td>mfcli.jar</td>
      </tr>
      <tr>
        <td>iris</td>
        <td>viz</td>
      </tr>
      <tr>
        <td>Iris</td>
        <td>Viz</td>
      </tr>
     
    </table>
      
    </div>
      
    </div>
  </div>

    <div class="foot-wrap">
        <div class="foot-nav">
            © Copyright 2020 Temenos © <a href="#" href="#" id="copyrightBtn">Copyright</a> HCL America, Inc., 2021

            <a href="https://hcltechsw.com/wps/portal/legal/privacy" style="margin-left: 10px;">Privacy Statement</a> | <a href="https://apc01.safelinks.protection.outlook.com/?url=https%3A%2F%2Fwww.hcltechsw.com%2Fwps%2Fportal%2Flegal%2Fterms-use&data=04%7C01%7Csuresh.chenji%40hcl.com%7Ca77ebddc51574aff8c6c08d8f056542d%7C189de737c93a4f5a8b686f4ca9941912%7C0%7C0%7C637523600856805537%7CUnknown%7CTWFpbGZsb3d8eyJWIjoiMC4wLjAwMDAiLCJQIjoiV2luMzIiLCJBTiI6Ik1haWwiLCJXVCI6Mn0%3D%7C1000&sdata=vLnT466NGuIbvQ0nEwfn2qdXeuhHb6XOnh1pibATDI4%3D&reserved=0">Terms of Use</a>
        </div>
        <ul class="social-nav">
            <li><a href="https://www.facebook.com/HCLDigital" class="facebook" target="_blank">Facebook</a></li>
            <li><a href="https://www.linkedin.com/company/hclsoftware" class="linkedin" target="_blank">LinkedIn</a></li>
            <li><a href="https://twitter.com/HCLDigital"  class="twitter" target="_blank">Twitter</a></li>
            <li><a href="https://www.youtube.com/HCLDigitalSolutions" class="youtube" target="_blank">Youtube</a></li>
        </ul>
    </div>

</footer>
<script>
  
var modal = document.getElementById("copyright-modal");
var revisedTerms = document.getElementById("revised-terms");

// Get the button that opens the modal
var btn = document.getElementById("copyrightBtn");
var rtBtn = document.querySelector(".revisedTermsBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];
var span2 = document.getElementsByClassName("close2")[0];

// When the user clicks on the button, open the modal
btn.onclick = function (e) {
    e.preventDefault();
    modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
document.querySelector("span.close").onclick = function () {
    modal.style.display = "none";
}

// When the user clicks on the button, open the modal
rtBtn.onclick = function (e) {
    e.preventDefault();
    revisedTerms.style.display = "block";
}

document.querySelector("span.close2").onclick = function () {
    revisedTerms.style.display = "none";
}

document.onkeydown = function (evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
        modal.style.display = "none";
        revisedTerms.style.display = "none";
    }
};
// When the user clicks anywhere outside of the modal, close it
window.onclick = function (event) {
    if (event.target == modal) {
        modal.style.display = "none";
    } else if (event.target == revisedTerms) {
        revisedTerms.style.display = "none";
    }
}

// nav menu mobile screen  
if (document.documentElement.clientWidth < 800) {
    const subpageNav = document.getElementById('sub-site-nav');
    const submainmenuButton = document.getElementById('sub-menu-button');

    submainmenuButton.addEventListener('click', function () {

        document.getElementById('site-nav').classList.remove('nav-open');
        subpageNav.classList.toggle('nav-open');

    });
}


// horizontal resize of left and right navigation panels
const bar = document.querySelector('.split__bar');
const bar1 = document.querySelector('.split__bar1');
const left = document.querySelector('.side-bar');
const middle = document.querySelector('.main');

const right = document.querySelector('.right-menu');

// side panel collapse and expand buttons 
var togBtn = document.getElementById('left-close');
var togBtnRight = document.getElementById('right-close');
if (togBtn) {
    togBtn.addEventListener('click', (e) => {
        e.preventDefault();
        left.classList.toggle('close-nav');
        left.style.width = "264px";
        togBtn.classList.toggle('flip');

    });
}
if (togBtnRight) {
    togBtnRight.addEventListener('click', (e) => {
        e.preventDefault();
        right.classList.toggle('close-nav');
        right.style.width = "264px";
        togBtnRight.classList.toggle('flip');
    });

}
let mouse_is_down = false;
if (bar) {
    bar.addEventListener('mousedown', (e) => {
        mouse_is_down = true;
    })
}


document.addEventListener('mousemove', (e) => {
    if (!mouse_is_down) return;
    left.style.width = `${e.clientX}px`;
})

document.addEventListener('mouseup', () => {
    mouse_is_down = false;
})



let mouse_is_down1 = false
if (bar1) {
    bar1.addEventListener('mousedown', (e) => {
        mouse_is_down1 = true;
    })
}


document.addEventListener('mousemove', (e) => {
    if (!mouse_is_down1) return;

    right.style.width = `${window.innerWidth - e.clientX}px`;
})

document.addEventListener('mouseup', () => {
    mouse_is_down1 = false;

});



//parentDiv is our max parent selector

function getParents(el, parentSelector) {
    if (parentSelector === undefined) {
        parentSelector = document;
    } else if (el === undefined) {
        return;
    }
    var parents = [];
    var p = el.parentNode;
    while (p !== parentSelector) {
        var o = p;
        parents.push(o);
        p = o.parentNode;
    }
    parents.push(parentSelector);
    return parents;
}



// var current = window.location.href;
var current = window.location.pathname + window.location.hash;
const allLinks = document.querySelectorAll('a.nav-list-link')
const rightLinks = document.querySelectorAll('.right-menu a.nav-list-link')


var activeLink;
var parentDiv = document.getElementById("sub-site-nav") || document.getElementById("site-nav");


for (var j = 0; j < allLinks.length; j++) {
    if (current == allLinks[j].pathname + allLinks[j].hash) {
        allLinks[j].classList.add('active')
        activeLink = allLinks[j];

    } else {
        allLinks[j].classList.remove('active')

    }
}

const parents = getParents(activeLink, parentDiv);
if (parents) {
    for (var i = 0; i < parents.length; i++) {

        if (parents[i].nodeName == 'LI') {
            parents[i].classList.add('active')
        }

    }
    activeLink.parentNode.classList.remove('active');
}
for (const item of rightLinks) {

    item.addEventListener('click', function (event) {
        //...
        event.stopPropagation();
        this.parentNode.classList.remove('active');
        for (var i = 0; i < rightLinks.length; i++) {
            rightLinks[i].classList.remove('active');
        }

        this.classList.add('active')
    })
}


  </script>

</body>
</html>
