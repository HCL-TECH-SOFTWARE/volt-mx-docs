<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='android-os-RecoverySystem'>/**@class android.os.RecoverySystem
</span>@extends java.lang.Object

 RecoverySystem contains methods for interacting with the Android
 recovery system (the separate partition that can be used to install
 system updates, wipe user data, etc.)
*/
var RecoverySystem = {

<span id='android-os-RecoverySystem-property-BLOCK_MAP_FILE'>/** The recovery image uses this file to identify the location (i.e. blocks)
</span> of an OTA package on the /data partition. The block map file is
 generated by uncrypt.

 @hide
*/
BLOCK_MAP_FILE : &quot;null&quot;,
<span id='android-os-RecoverySystem-property-UNCRYPT_PACKAGE_FILE'>/** UNCRYPT_PACKAGE_FILE stores the filename to be uncrypt'd, which will be
</span> read by uncrypt.

 @hide
*/
UNCRYPT_PACKAGE_FILE : &quot;null&quot;,
<span id='android-os-RecoverySystem-property-UNCRYPT_STATUS_FILE'>/** UNCRYPT_STATUS_FILE stores the time cost (and error code in the case of a failure)
</span> of uncrypt.

 @hide
*/
UNCRYPT_STATUS_FILE : &quot;null&quot;,
<span id='android-os-RecoverySystem-method-verifyPackage'>/**Verify the cryptographic signature of a system update package
</span> before installing it.  Note that the package is also verified
 separately by the installer once the device is rebooted into
 the recovery system.  This function will return only if the
 package was successfully verified; otherwise it will throw an
 exception.

 Verification of a package can take significant time, so this
 function should not be called from a UI thread.  Interrupting
 the thread while this function is in progress will result in a
 SecurityException being thrown (and the thread's interrupt flag
 will be cleared).
@param {Object {File}} packageFile  the package to be verified
@param {Object {RecoverySystem.ProgressListener}} listener     an object to receive periodic progress
 updates as verification proceeds.  May be null.
@param {Object {File}} deviceCertsZipFile  the zip file of certificates whose
 public keys we will accept.  Verification succeeds if the
 package is signed by the private key corresponding to any
 public key in this file.  May be null to use the system default
 file (currently &quot;/system/etc/security/otacerts.zip&quot;).
@throws IOException if there were any errors reading the
 package or certs files.
@throws GeneralSecurityException if verification failed
*/
verifyPackage : function(  ) {},

<span id='android-os-RecoverySystem-method-verifyPackageCompatibility'>/**Verifies the package compatibility info against the current system.
</span>@param {Object {File}} compatibilityFile the {@link File} that contains the package compatibility info.
@throws IOException if there were any errors reading the compatibility file.
@return {Boolean} the compatibility verification result.

 {@hide}
*/
verifyPackageCompatibility : function(  ) {},

<span id='android-os-RecoverySystem-method-processPackage'>/**Process a given package with uncrypt. No-op if the package is not on the
</span> /data partition.
@param {Object {Context}} Context      the Context to use
@param {Object {File}} packageFile  the package to be processed
@param {Object {RecoverySystem.ProgressListener}} listener     an object to receive periodic progress updates as
                     processing proceeds.  May be null.
@param {Object {Handler}} handler      the Handler upon which the callbacks will be
                     executed.
@throws IOException if there were any errors processing the package file.
@hide 
*/
processPackage : function(  ) {},

<span id='android-os-RecoverySystem-method-processPackage'>/**Process a given package with uncrypt. No-op if the package is not on the
</span> /data partition.
@param {Object {Context}} Context      the Context to use
@param {Object {File}} packageFile  the package to be processed
@param {Object {RecoverySystem.ProgressListener}} listener     an object to receive periodic progress updates as
                     processing proceeds.  May be null.
@throws IOException if there were any errors processing the package file.
@hide 
*/
processPackage : function(  ) {},

<span id='android-os-RecoverySystem-method-installPackage'>/**Reboots the device in order to install the given update
</span> package.
 Requires the {@link android.Manifest.permission#REBOOT} permission.
@param {Object {Context}} context      the Context to use
@param {Object {File}} packageFile  the update package to install.  Must be on
 a partition mountable by recovery.  (The set of partitions
 known to recovery may vary from device to device.  Generally,
 /cache and /data are safe.)
@throws IOException  if writing the recovery command file
 fails, or if the reboot itself fails.
*/
installPackage : function(  ) {},

<span id='android-os-RecoverySystem-method-installPackage'>/**If the package hasn't been processed (i.e. uncrypt'd), set up
</span> UNCRYPT_PACKAGE_FILE and delete BLOCK_MAP_FILE to trigger uncrypt during the
 reboot.
@param {Object {Context}} context      the Context to use
@param {Object {File}} packageFile  the update package to install.  Must be on a
 partition mountable by recovery.
@param {Boolean} processed    if the package has been processed (uncrypt'd).
@throws IOException if writing the recovery command file fails, or if
 the reboot itself fails.
@hide 
*/
installPackage : function(  ) {},

<span id='android-os-RecoverySystem-method-scheduleUpdateOnBoot'>/**Schedule to install the given package on next boot. The caller needs to
</span> ensure that the package must have been processed (uncrypt'd) if needed.
 It sets up the command in BCB (bootloader control block), which will
 be read by the bootloader and the recovery image.
@param {Object {Context}} Context      the Context to use.
@param {Object {File}} packageFile  the package to be installed.
@throws IOException if there were any errors setting up the BCB.
@hide 
*/
scheduleUpdateOnBoot : function(  ) {},

<span id='android-os-RecoverySystem-method-cancelScheduledUpdate'>/**Cancel any scheduled update by clearing up the BCB (bootloader control
</span> block).
@param {Object {Context}} Context      the Context to use.
@throws IOException if there were any errors clearing up the BCB.
@hide 
*/
cancelScheduledUpdate : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeUserData'>/**Reboots the device and wipes the user data and cache
</span> partitions.  This is sometimes called a &quot;factory reset&quot;, which
 is something of a misnomer because the system partition is not
 restored to its factory state.  Requires the
 {@link android.Manifest.permission#REBOOT} permission.
@param {Object {Context}} context  the Context to use
@throws IOException  if writing the recovery command file
 fails, or if the reboot itself fails.
@throws SecurityException if the current user is not allowed to wipe data.
*/
rebootWipeUserData : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeUserData'>/**{@hide}
</span>*/
rebootWipeUserData : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeUserData'>/**{@hide}
</span>*/
rebootWipeUserData : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeUserData'>/**{@hide}
</span>*/
rebootWipeUserData : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeUserData'>/**Reboots the device and wipes the user data and cache
</span> partitions.  This is sometimes called a &quot;factory reset&quot;, which
 is something of a misnomer because the system partition is not
 restored to its factory state.  Requires the
 {@link android.Manifest.permission#REBOOT} permission.
@param {Object {Context}} context   the Context to use
@param {Boolean} shutdown  if true, the device will be powered down after
                  the wipe completes, rather than being rebooted
                  back to the regular system.
@param {String} reason    the reason for the wipe that is visible in the logs
@param {Boolean} force     whether the {@link UserManager.DISALLOW_FACTORY_RESET} user restriction
                  should be ignored
@param {Boolean} wipeEuicc whether wipe the euicc data
@throws IOException  if writing the recovery command file
 fails, or if the reboot itself fails.
@throws SecurityException if the current user is not allowed to wipe data.
@hide 
*/
rebootWipeUserData : function(  ) {},

<span id='android-os-RecoverySystem-method-wipeEuiccData'>/**Returns whether wipe Euicc data successfully or not.
</span>@param {Object {Context}} packageName the package name of the caller app.
@hide 
*/
wipeEuiccData : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootPromptAndWipeUserData'>/**{@hide}
</span>*/
rebootPromptAndWipeUserData : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeCache'>/**Reboot into the recovery system to wipe the /cache partition.
</span>@throws IOException if something goes wrong.
*/
rebootWipeCache : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeCache'>/**{@hide}
</span>*/
rebootWipeCache : function(  ) {},

<span id='android-os-RecoverySystem-method-rebootWipeAb'>/**Reboot into recovery and wipe the A/B device.
</span>@param {Object {Context}} Context      the Context to use.
@param {Object {File}} packageFile  the wipe package to be applied.
@param {String} reason       the reason to wipe.
@throws IOException if something goes wrong.
@hide 
*/
rebootWipeAb : function(  ) {},

<span id='android-os-RecoverySystem-method-handleAftermath'>/**Called after booting to process and remove recovery-related files.
</span>@return {String} the log file from recovery, or null if none was found.
@hide 
*/
handleAftermath : function(  ) {},


};</pre>
</body>
</html>
