Ext.data.JsonP.android_nfc_cardemulation_HostApduService({"tagname":"class","name":"android.nfc.cardemulation.HostApduService","autodetected":{},"files":[{"filename":"HostApduService.js","href":"HostApduService.html#android-nfc-cardemulation-HostApduService"}],"extends":"android.app.Service","members":[{"name":"DEACTIVATION_DESELECTED","tagname":"property","owner":"android.nfc.cardemulation.HostApduService","id":"property-DEACTIVATION_DESELECTED","meta":{}},{"name":"DEACTIVATION_LINK_LOSS","tagname":"property","owner":"android.nfc.cardemulation.HostApduService","id":"property-DEACTIVATION_LINK_LOSS","meta":{}},{"name":"SERVICE_INTERFACE","tagname":"property","owner":"android.nfc.cardemulation.HostApduService","id":"property-SERVICE_INTERFACE","meta":{}},{"name":"SERVICE_META_DATA","tagname":"property","owner":"android.nfc.cardemulation.HostApduService","id":"property-SERVICE_META_DATA","meta":{}},{"name":"notifyUnhandled","tagname":"method","owner":"android.nfc.cardemulation.HostApduService","id":"method-notifyUnhandled","meta":{}},{"name":"onBind","tagname":"method","owner":"android.nfc.cardemulation.HostApduService","id":"method-onBind","meta":{}},{"name":"onDeactivated","tagname":"method","owner":"android.nfc.cardemulation.HostApduService","id":"method-onDeactivated","meta":{}},{"name":"processCommandApdu","tagname":"method","owner":"android.nfc.cardemulation.HostApduService","id":"method-processCommandApdu","meta":{}},{"name":"sendResponseApdu","tagname":"method","owner":"android.nfc.cardemulation.HostApduService","id":"method-sendResponseApdu","meta":{}}],"alternateClassNames":[],"aliases":{},"id":"class-android.nfc.cardemulation.HostApduService","short_doc":"HostApduService is a convenience Service class that can be\n extended to emulate an NFC card inside an Android\n servic...","classIcon":"icon-class","superclasses":["android.app.Service"],"subclasses":[],"mixedInto":[],"mixins":[],"parentMixins":[],"requires":[],"uses":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>android.app.Service<div class='subclass '><strong>android.nfc.cardemulation.HostApduService</strong></div></div><h4>Files</h4><div class='dependency'><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService' target='_blank'>HostApduService.js</a></div></pre><div class='doc-contents'><p>HostApduService is a convenience Service class that can be\n extended to emulate an NFC card inside an Android\n service component.\n\n <div class=\"special reference\">\n <h3>Developer Guide</h3>\n For a general introduction to card emulation, see\n <a href=\"{@docRoot}guide/topics/connectivity/nfc/hce.html\">\n Host-based Card Emulation</a>.</div></p>\n\n\n<p> </p>\n\n<p> <h3>NFC Protocols</h3>\n <p>Cards emulated by this class are based on the NFC-Forum ISO-DEP\n protocol (based on ISO/IEC 14443-4) and support processing\n command Application Protocol Data Units (APDUs) as\n defined in the ISO/IEC 7816-4 specification.</p>\n\n<p> <h3>Service selection</h3>\n <p>When a remote NFC device wants to talk to your\n service, it sends a so-called\n \"SELECT AID\" APDU as defined in the ISO/IEC 7816-4 specification.\n The AID is an application identifier defined in ISO/IEC 7816-4.</p>\n\n<p> <p>The registration procedure for AIDs is defined in the\n ISO/IEC 7816-5 specification. If you don't want to register an\n AID, you are free to use AIDs in the proprietary range:\n bits 8-5 of the first byte must each be set to '1'. For example,\n \"0xF00102030405\" is a proprietary AID. If you do use proprietary\n AIDs, it is recommended to choose an AID of at least 6 bytes,\n to reduce the risk of collisions with other applications that\n might be using proprietary AIDs as well.</p>\n\n<p> <h3>AID groups</h3>\n <p>In some cases, a service may need to register multiple AIDs\n to implement a certain application, and it needs to be sure\n that it is the default handler for all of these AIDs (as opposed\n to some AIDs in the group going to another service).</p>\n\n<p> <p>An AID group is a list of AIDs that should be considered as\n belonging together by the OS. For all AIDs in an AID group, the\n OS will guarantee one of the following:\n <ul>\n <li>All AIDs in the group are routed to this service\n <li>No AIDs in the group are routed to this service\n </li></li></ul>\n In other words, there is no in-between state, where some AIDs\n in the group can be routed to this service, and some to another.\n <h3>AID groups and categories</h3>\n <p>Each AID group can be associated with a category. This allows\n the Android OS to classify services, and it allows the user to\n set defaults at the category level instead of the AID level.</p>\n\n<p> <p>You can use\n String)\n to determine if your service is the default handler for a category.</p>\n\n<p> <p>In this version of the platform, the only known categories\n are <a href=\"#!/api/android.nfc.cardemulation.CardEmulation-property-CATEGORY_PAYMENT\" rel=\"android.nfc.cardemulation.CardEmulation-property-CATEGORY_PAYMENT\" class=\"docClass\">android.nfc.cardemulation.CardEmulation.CATEGORY_PAYMENT</a> and <a href=\"#!/api/android.nfc.cardemulation.CardEmulation-property-CATEGORY_OTHER\" rel=\"android.nfc.cardemulation.CardEmulation-property-CATEGORY_OTHER\" class=\"docClass\">android.nfc.cardemulation.CardEmulation.CATEGORY_OTHER</a>.\n AID groups without a category, or with a category that is not recognized\n by the current platform version, will automatically be\n grouped into the <a href=\"#!/api/android.nfc.cardemulation.CardEmulation-property-CATEGORY_OTHER\" rel=\"android.nfc.cardemulation.CardEmulation-property-CATEGORY_OTHER\" class=\"docClass\">android.nfc.cardemulation.CardEmulation.CATEGORY_OTHER</a> category.\n <h3>Service AID registration</h3>\n <p>To tell the platform which AIDs groups\n are requested by this service, a <a href=\"#!/api/android.nfc.cardemulation.HostApduService-property-SERVICE_META_DATA\" rel=\"android.nfc.cardemulation.HostApduService-property-SERVICE_META_DATA\" class=\"docClass\">SERVICE_META_DATA</a>\n entry must be included in the declaration of the service. An\n example of a HostApduService manifest declaration is shown below:\n <pre> &lt;service android:name=\".MyHostApduService\" android:exported=\"true\" android:permission=\"android.permission.BIND_NFC_SERVICE\"&gt;\n     &lt;intent-filter&gt;\n         &lt;action android:name=\"android.nfc.cardemulation.action.HOST_APDU_SERVICE\"/&gt;\n     &lt;/intent-filter&gt;\n     &lt;meta-data android:name=\"android.nfc.cardemulation.host_apdu_ervice\" android:resource=\"@xml/apduservice\"/&gt;\n &lt;/service&gt;</pre></p>\n\n<p> This meta-data tag points to an apduservice.xml file.\n An example of this file with a single AID group declaration is shown below:</p>\n\n<pre> &lt;host-apdu-service xmlns:android=\"http://schemas.android.com/apk/res/android\"\n           android:description=\"@string/servicedesc\" android:requireDeviceUnlock=\"false\"&gt;\n       &lt;aid-group android:description=\"@string/aiddescription\" android:category=\"other\">\n           &lt;aid-filter android:name=\"F0010203040506\"/&gt;\n           &lt;aid-filter android:name=\"F0394148148100\"/&gt;\n       &lt;/aid-group&gt;\n &lt;/host-apdu-service&gt;\n </pre>\n\n\n<p> <p>The &lt;host-apdu-service&gt; is required\n to contain a\n &lt;android:description&gt;\n attribute that contains a user-friendly description of the service that may be shown in UI.\n The\n &lt;requireDeviceUnlock&gt;\n attribute can be used to specify that the device must be unlocked before this service\n can be invoked to handle APDUs.\n <p>The &lt;host-apdu-service&gt; must\n contain one or more &lt;aid-group&gt; tags.\n Each &lt;aid-group&gt; must contain one or\n more &lt;aid-filter&gt; tags, each of which\n contains a single AID. The AID must be specified in hexadecimal format, and contain\n an even number of characters.\n <h3>AID conflict resolution</h3>\n Multiple HostApduServices may be installed on a single device, and the same AID\n can be registered by more than one service. The Android platform resolves AID\n conflicts depending on which category an AID belongs to. Each category may\n have a different conflict resolution policy. For example, for some categories\n the user may be able to select a default service in the Android settings UI.\n For other categories, to policy may be to always ask the user which service\n is to be invoked in case of conflict.</p>\n\n<p> To query the conflict resolution policy for a certain category, see\n android.nfc.cardemulation.CardEmulation.getSelectionModeForCategory(String).</p>\n\n<p> <h3>Data exchange</h3>\n <p>Once the platform has resolved a \"SELECT AID\" command APDU to a specific\n service component, the \"SELECT AID\" command APDU and all subsequent\n command APDUs will be sent to that service through\n Bundle), until either:\n <ul>\n <li>The NFC link is broken</li>\n <li>A \"SELECT AID\" APDU is received which resolves to another service</li>\n </ul>\n These two scenarios are indicated by a call to <a href=\"#!/api/android.nfc.cardemulation.HostApduService-method-onDeactivated\" rel=\"android.nfc.cardemulation.HostApduService-method-onDeactivated\" class=\"docClass\">onDeactivated</a>(int).</p>\n\n<p> <p class=\"note\">Use of this class requires the\n PackageManager.FEATURE_NFC_HOST_CARD_EMULATION to be present\n on the device.</p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-property'>Properties</h3><div class='subsection'><div id='property-DEACTIVATION_DESELECTED' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-property-DEACTIVATION_DESELECTED' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-property-DEACTIVATION_DESELECTED' class='name expandable'>DEACTIVATION_DESELECTED</a> : String<span class=\"signature\"></span></div><div class='description'><div class='short'>Reason for onDeactivated(int). ...</div><div class='long'><p>Reason for <a href=\"#!/api/android.nfc.cardemulation.HostApduService-method-onDeactivated\" rel=\"android.nfc.cardemulation.HostApduService-method-onDeactivated\" class=\"docClass\">onDeactivated</a>(int).</p>\n\n<p><p>Indicates deactivation was due to a different AID\nbeing selected (which implicitly deselects the AID\ncurrently active on the logical channel).</p>\n\n<p><p>Note that this next AID may still be resolved to this\nservice, in which case Bundle)\nwill be called again.</p>\n<p>Defaults to: <code>&quot;1&quot;</code></p></div></div></div><div id='property-DEACTIVATION_LINK_LOSS' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-property-DEACTIVATION_LINK_LOSS' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-property-DEACTIVATION_LINK_LOSS' class='name expandable'>DEACTIVATION_LINK_LOSS</a> : String<span class=\"signature\"></span></div><div class='description'><div class='short'>Reason for onDeactivated(int). ...</div><div class='long'><p>Reason for <a href=\"#!/api/android.nfc.cardemulation.HostApduService-method-onDeactivated\" rel=\"android.nfc.cardemulation.HostApduService-method-onDeactivated\" class=\"docClass\">onDeactivated</a>(int).\nIndicates deactivation was due to the NFC link\nbeing lost.</p>\n<p>Defaults to: <code>&quot;0&quot;</code></p></div></div></div><div id='property-SERVICE_INTERFACE' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-property-SERVICE_INTERFACE' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-property-SERVICE_INTERFACE' class='name expandable'>SERVICE_INTERFACE</a> : String<span class=\"signature\"></span></div><div class='description'><div class='short'>The Intent action that must be declared as handled by the service. ...</div><div class='long'><p>The Intent action that must be declared as handled by the service.</p>\n<p>Defaults to: <code>&quot;android.nfc.cardemulation.action.HOST_APDU_SERVICE&quot;</code></p></div></div></div><div id='property-SERVICE_META_DATA' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-property-SERVICE_META_DATA' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-property-SERVICE_META_DATA' class='name expandable'>SERVICE_META_DATA</a> : String<span class=\"signature\"></span></div><div class='description'><div class='short'>The name of the meta-data element that contains\nmore information about this service. ...</div><div class='long'><p>The name of the meta-data element that contains\nmore information about this service.</p>\n<p>Defaults to: <code>&quot;android.nfc.cardemulation.host_apdu_service&quot;</code></p></div></div></div></div></div><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-notifyUnhandled' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-method-notifyUnhandled' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-method-notifyUnhandled' class='name expandable'>notifyUnhandled</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Calling this method allows the service to tell the OS\n that it won't be able to complete this transaction -\n for exam...</div><div class='long'><p>Calling this method allows the service to tell the OS\n that it won't be able to complete this transaction -\n for example, because it requires data connectivity\n that is not present at that moment.</p>\n\n<p> The OS may use this indication to give the user a list\n of alternative applications that can handle the last\n AID that was selected. If the user would select an\n application from the list, that action by itself\n will not cause the default to be changed; the selected\n application will be invoked for the next tap only.</p>\n\n<p> If there are no other applications that can handle\n this transaction, the OS will show an error dialog\n indicating your service could not complete the\n transaction.</p>\n\n<p> <p>Note: this method may be called anywhere between\n    the first Bundle)\n    call and a <a href=\"#!/api/android.nfc.cardemulation.HostApduService-method-onDeactivated\" rel=\"android.nfc.cardemulation.HostApduService-method-onDeactivated\" class=\"docClass\">onDeactivated</a>(int) call.</p>\n</div></div></div><div id='method-onBind' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-method-onBind' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-method-onBind' class='name expandable'>onBind</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-onDeactivated' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-method-onDeactivated' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-method-onDeactivated' class='name expandable'>onDeactivated</a>( <span class='pre'>reason</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>This method will be called in two possible scenarios:\n The NFC link has been deactivated or lost\n A different AID has...</div><div class='long'><p>This method will be called in two possible scenarios:\n <li>The NFC link has been deactivated or lost\n <li>A different AID has been selected and was resolved to a different\n     service component</li></li></p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>reason</span> : Number<div class='sub-desc'><p>Either <a href=\"#!/api/android.nfc.cardemulation.HostApduService-property-DEACTIVATION_LINK_LOSS\" rel=\"android.nfc.cardemulation.HostApduService-property-DEACTIVATION_LINK_LOSS\" class=\"docClass\">DEACTIVATION_LINK_LOSS</a> or <a href=\"#!/api/android.nfc.cardemulation.HostApduService-property-DEACTIVATION_DESELECTED\" rel=\"android.nfc.cardemulation.HostApduService-property-DEACTIVATION_DESELECTED\" class=\"docClass\">DEACTIVATION_DESELECTED</a></p>\n</div></li></ul></div></div></div><div id='method-processCommandApdu' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-method-processCommandApdu' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-method-processCommandApdu' class='name expandable'>processCommandApdu</a>( <span class='pre'>commandApdu, extras</span> ) : Number<span class=\"signature\"></span></div><div class='description'><div class='short'>This method will be called when a command APDU has been received\n from a remote device. ...</div><div class='long'><p><p>This method will be called when a command APDU has been received\n from a remote device. A response APDU can be provided directly\n by returning a byte-array in this method. Note that in general\n response APDUs must be sent as quickly as possible, given the fact\n that the user is likely holding his device over an NFC reader\n when this method is called.</p>\n\n<p> <p class=\"note\">If there are multiple services that have registered for the same\n AIDs in their meta-data entry, you will only get called if the user has\n explicitly selected your service, either as a default or just for the next tap.</p>\n\n<p> <p class=\"note\">This method is running on the main thread of your application.\n If you cannot return a response APDU immediately, return null\n and use the sendResponseApdu(byte[]) method later.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>commandApdu</span> : Object {byte[]}<div class='sub-desc'><p>The APDU that was received from the remote device</p>\n</div></li><li><span class='pre'>extras</span> : Object {Bundle}<div class='sub-desc'><p>A bundle containing extra data. May be null.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Number</span><div class='sub-desc'><p>a byte-array containing the response APDU, or null if no\n         response APDU can be sent at this point.</p>\n</div></li></ul></div></div></div><div id='method-sendResponseApdu' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.nfc.cardemulation.HostApduService'>android.nfc.cardemulation.HostApduService</span><br/><a href='source/HostApduService.html#android-nfc-cardemulation-HostApduService-method-sendResponseApdu' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.nfc.cardemulation.HostApduService-method-sendResponseApdu' class='name expandable'>sendResponseApdu</a>( <span class='pre'>responseApdu</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sends a response APDU back to the remote device. ...</div><div class='long'><p>Sends a response APDU back to the remote device.</p>\n\n<p> <p>Note: this method may be called from any thread and will not block.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>responseApdu</span> : Object {byte[]}<div class='sub-desc'><p>A byte-array containing the reponse APDU.</p>\n</div></li></ul></div></div></div></div></div></div></div>","meta":{}});