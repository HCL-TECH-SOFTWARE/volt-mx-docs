Ext.data.JsonP.com_android_server_job_JobStore({"tagname":"class","name":"com.android.server.job.JobStore","autodetected":{},"files":[{"filename":"JobStore.js","href":"JobStore.html#com-android-server-job-JobStore"}],"extends":"java.lang.Object","members":[{"name":"add","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-add","meta":{}},{"name":"clear","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-clear","meta":{}},{"name":"clockNowValidToInflate","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-clockNowValidToInflate","meta":{}},{"name":"countJobsForUid","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-countJobsForUid","meta":{}},{"name":"forEachJob","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-forEachJob","meta":{}},{"name":"forEachJobForSourceUid","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-forEachJobForSourceUid","meta":{}},{"name":"getJobByUidAndJobId","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-getJobByUidAndJobId","meta":{}},{"name":"getJobsByUid","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-getJobsByUid","meta":{}},{"name":"getJobsByUser","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-getJobsByUser","meta":{}},{"name":"getPersistStats","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-getPersistStats","meta":{}},{"name":"getRtcCorrectedJobsLocked","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-getRtcCorrectedJobsLocked","meta":{}},{"name":"initAndGetForTesting","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-initAndGetForTesting","meta":{}},{"name":"jobTimesInflatedValid","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-jobTimesInflatedValid","meta":{}},{"name":"readJobMapFromDisk","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-readJobMapFromDisk","meta":{}},{"name":"remove","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-remove","meta":{}},{"name":"removeJobsOfNonUsers","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-removeJobsOfNonUsers","meta":{}},{"name":"size","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-size","meta":{}},{"name":"waitForWriteToCompleteForTesting","tagname":"method","owner":"com.android.server.job.JobStore","id":"method-waitForWriteToCompleteForTesting","meta":{}}],"alternateClassNames":[],"aliases":{},"id":"class-com.android.server.job.JobStore","short_doc":"Maintains the master list of jobs that the job scheduler is tracking. ...","classIcon":"icon-class","superclasses":["java.lang.Object"],"subclasses":[],"mixedInto":[],"mixins":[],"parentMixins":[],"requires":[],"uses":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>java.lang.Object<div class='subclass '><strong>com.android.server.job.JobStore</strong></div></div><h4>Files</h4><div class='dependency'><a href='source/JobStore.html#com-android-server-job-JobStore' target='_blank'>JobStore.js</a></div></pre><div class='doc-contents'><p>Maintains the master list of jobs that the job scheduler is tracking. These jobs are compared by\n reference, so none of the functions in this class should make a copy.\n Also handles read/write of persisted jobs.</p>\n\n<p> Note on locking:\n      All callers to this class must <strong>lock on the class object they are calling</strong>.\n      This is important b/c com.android.server.job.JobStore.WriteJobsMapToDiskRunnable\n      and com.android.server.job.JobStore.ReadJobMapFromDiskRunnable lock on that\n      object.</p>\n\n<p> Test:\n atest $ANDROID_BUILD_TOP/frameworks/base/services/tests/servicestests/src/com/android/server/job/JobStoreTest.java</p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-add' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-add' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-add' class='name expandable'>add</a>( <span class='pre'>jobStatus</span> ) : Boolean<span class=\"signature\"></span></div><div class='description'><div class='short'>Add a job to the master list, persisting it if necessary. ...</div><div class='long'><p>Add a job to the master list, persisting it if necessary. If the JobStatus already exists,\n it will be replaced.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>jobStatus</span> : Object {JobStatus}<div class='sub-desc'><p>Job to add.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Boolean</span><div class='sub-desc'><p>Whether or not an equivalent JobStatus was replaced by this operation.</p>\n</div></li></ul></div></div></div><div id='method-clear' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-clear' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-clear' class='name expandable'>clear</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-clockNowValidToInflate' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-clockNowValidToInflate' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-clockNowValidToInflate' class='name expandable'>clockNowValidToInflate</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-countJobsForUid' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-countJobsForUid' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-countJobsForUid' class='name expandable'>countJobsForUid</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-forEachJob' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-forEachJob' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-forEachJob' class='name expandable'>forEachJob</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-forEachJobForSourceUid' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-forEachJobForSourceUid' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-forEachJobForSourceUid' class='name expandable'>forEachJobForSourceUid</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-getJobByUidAndJobId' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-getJobByUidAndJobId' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-getJobByUidAndJobId' class='name expandable'>getJobByUidAndJobId</a>( <span class='pre'>uid, jobId</span> ) : Object {com.android.server.job.controllers.JobStatus}<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>uid</span> : Number<div class='sub-desc'><p>Uid of the requesting app.</p>\n</div></li><li><span class='pre'>jobId</span> : Number<div class='sub-desc'><p>Job id, specified at schedule-time.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object {com.android.server.job.controllers.JobStatus}</span><div class='sub-desc'><p>the JobStatus that matches the provided uId and jobId, or null if none found.</p>\n</div></li></ul></div></div></div><div id='method-getJobsByUid' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-getJobsByUid' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-getJobsByUid' class='name expandable'>getJobsByUid</a>( <span class='pre'>uid</span> ) : Object {java.util.List}<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>uid</span> : Number<div class='sub-desc'><p>Uid of the requesting app.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object {java.util.List}</span><div class='sub-desc'><p>All JobStatus objects for a given uid from the master list. Never null.</p>\n</div></li></ul></div></div></div><div id='method-getJobsByUser' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-getJobsByUser' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-getJobsByUser' class='name expandable'>getJobsByUser</a>( <span class='pre'>userHandle</span> ) : Object {java.util.List}<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>userHandle</span> : Number<div class='sub-desc'><p>User for whom we are querying the list of jobs.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object {java.util.List}</span><div class='sub-desc'><p>A list of all the jobs scheduled for the provided user. Never null.</p>\n</div></li></ul></div></div></div><div id='method-getPersistStats' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-getPersistStats' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-getPersistStats' class='name expandable'>getPersistStats</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-getRtcCorrectedJobsLocked' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-getRtcCorrectedJobsLocked' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-getRtcCorrectedJobsLocked' class='name expandable'>getRtcCorrectedJobsLocked</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Find all the jobs that were affected by RTC clock uncertainty at boot time. ...</div><div class='long'><p>Find all the jobs that were affected by RTC clock uncertainty at boot time.  Returns\n parallel lists of the existing JobStatus objects and of new, equivalent JobStatus instances\n with now-corrected time bounds.</p>\n</div></div></div><div id='method-initAndGetForTesting' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-initAndGetForTesting' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-initAndGetForTesting' class='name expandable'>initAndGetForTesting</a>( <span class='pre'></span> ) : Object {com.android.server.job.JobStore}<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object {com.android.server.job.JobStore}</span><div class='sub-desc'><p>A freshly initialized job store object, with no loaded jobs.</p>\n</div></li></ul></div></div></div><div id='method-jobTimesInflatedValid' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-jobTimesInflatedValid' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-jobTimesInflatedValid' class='name expandable'>jobTimesInflatedValid</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-readJobMapFromDisk' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-readJobMapFromDisk' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-readJobMapFromDisk' class='name expandable'>readJobMapFromDisk</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-remove' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-remove' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-remove' class='name expandable'>remove</a>( <span class='pre'>writeBack</span> ) : Boolean<span class=\"signature\"></span></div><div class='description'><div class='short'>Remove the provided job. ...</div><div class='long'><p>Remove the provided job. Will also delete the job if it was persisted.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>writeBack</span> : Object {JobStatus}<div class='sub-desc'><p>If true, the job will be deleted (if it was persisted) immediately.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Boolean</span><div class='sub-desc'><p>Whether or not the job existed to be removed.</p>\n</div></li></ul></div></div></div><div id='method-removeJobsOfNonUsers' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-removeJobsOfNonUsers' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-removeJobsOfNonUsers' class='name expandable'>removeJobsOfNonUsers</a>( <span class='pre'>whitelist</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Remove the jobs of users not specified in the whitelist. ...</div><div class='long'><p>Remove the jobs of users not specified in the whitelist.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>whitelist</span> : Object {int[]}<div class='sub-desc'><p>Array of User IDs whose jobs are not to be removed.</p>\n</div></li></ul></div></div></div><div id='method-size' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-size' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-size' class='name expandable'>size</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n</div></div></div><div id='method-waitForWriteToCompleteForTesting' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.server.job.JobStore'>com.android.server.job.JobStore</span><br/><a href='source/JobStore.html#com-android-server-job-JobStore-method-waitForWriteToCompleteForTesting' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.server.job.JobStore-method-waitForWriteToCompleteForTesting' class='name expandable'>waitForWriteToCompleteForTesting</a>( <span class='pre'>maxWaitMillis</span> ) : Boolean<span class=\"signature\"></span></div><div class='description'><div class='short'>Wait for any pending write to the persistent store to clear ...</div><div class='long'><p>Wait for any pending write to the persistent store to clear</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>maxWaitMillis</span> : Number<div class='sub-desc'><p>Maximum time from present to wait</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Boolean</span><div class='sub-desc'><p>{@code true} if I/O cleared as expected, {@code false} if the wait\n     timed out before the pending write completed.</p>\n</div></li></ul></div></div></div></div></div></div></div>","meta":{}});