Ext.data.JsonP.com_android_common_OperationScheduler({"tagname":"class","name":"com.android.common.OperationScheduler","autodetected":{},"files":[{"filename":"OperationScheduler.js","href":"OperationScheduler.html#com-android-common-OperationScheduler"}],"extends":"java.lang.Object","members":[{"name":"getLastAttemptTimeMillis","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-getLastAttemptTimeMillis","meta":{}},{"name":"getLastSuccessTimeMillis","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-getLastSuccessTimeMillis","meta":{}},{"name":"getNextTimeMillis","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-getNextTimeMillis","meta":{}},{"name":"onPermanentError","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-onPermanentError","meta":{}},{"name":"onSuccess","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-onSuccess","meta":{}},{"name":"onTransientError","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-onTransientError","meta":{}},{"name":"parseOptions","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-parseOptions","meta":{}},{"name":"resetPermanentError","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-resetPermanentError","meta":{}},{"name":"resetTransientError","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-resetTransientError","meta":{}},{"name":"setEnabledState","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-setEnabledState","meta":{}},{"name":"setMoratoriumTimeHttp","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-setMoratoriumTimeHttp","meta":{}},{"name":"setMoratoriumTimeMillis","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-setMoratoriumTimeMillis","meta":{}},{"name":"setTriggerTimeMillis","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-setTriggerTimeMillis","meta":{}},{"name":"toString","tagname":"method","owner":"com.android.common.OperationScheduler","id":"method-toString","meta":{}}],"alternateClassNames":[],"aliases":{},"id":"class-com.android.common.OperationScheduler","short_doc":"Tracks the success/failure history of a particular network operation in\n persistent storage and computes retry strate...","classIcon":"icon-class","superclasses":["java.lang.Object"],"subclasses":[],"mixedInto":[],"mixins":[],"parentMixins":[],"requires":[],"uses":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>java.lang.Object<div class='subclass '><strong>com.android.common.OperationScheduler</strong></div></div><h4>Files</h4><div class='dependency'><a href='source/OperationScheduler.html#com-android-common-OperationScheduler' target='_blank'>OperationScheduler.js</a></div></pre><div class='doc-contents'><p>Tracks the success/failure history of a particular network operation in\n persistent storage and computes retry strategy accordingly.  Handles\n exponential backoff, periodic rescheduling, event-driven triggering,\n retry-after moratorium intervals, etc. based on caller-specified parameters.</p>\n\n<p> <p>This class does not directly perform or invoke any operations,\n it only keeps track of the schedule.  Somebody else needs to call\n <a href=\"#!/api/com.android.common.OperationScheduler-method-getNextTimeMillis\" rel=\"com.android.common.OperationScheduler-method-getNextTimeMillis\" class=\"docClass\">getNextTimeMillis</a> as appropriate and do the actual work.</p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-getLastAttemptTimeMillis' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-getLastAttemptTimeMillis' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-getLastAttemptTimeMillis' class='name expandable'>getLastAttemptTimeMillis</a>( <span class='pre'></span> ) : Number<span class=\"signature\"></span></div><div class='description'><div class='short'>Return the last time the operation was attempted. ...</div><div class='long'><p>Return the last time the operation was attempted.  Does not modify any state.</p>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'>Number</span><div class='sub-desc'><p>the wall clock time when onSuccess() or onTransientError() was last called.</p>\n</div></li></ul></div></div></div><div id='method-getLastSuccessTimeMillis' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-getLastSuccessTimeMillis' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-getLastSuccessTimeMillis' class='name expandable'>getLastSuccessTimeMillis</a>( <span class='pre'></span> ) : Number<span class=\"signature\"></span></div><div class='description'><div class='short'>Return the last time the operation completed. ...</div><div class='long'><p>Return the last time the operation completed.  Does not modify any state.</p>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'>Number</span><div class='sub-desc'><p>the wall clock time when onSuccess() was last called.</p>\n</div></li></ul></div></div></div><div id='method-getNextTimeMillis' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-getNextTimeMillis' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-getNextTimeMillis' class='name expandable'>getNextTimeMillis</a>( <span class='pre'>options</span> ) : Number<span class=\"signature\"></span></div><div class='description'><div class='short'>Compute the time of the next operation. ...</div><div class='long'><p>Compute the time of the next operation.  Does not modify any state\n (unless the clock rolls backwards, in which case timers are reset).</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>options</span> : Object {OperationScheduler.Options}<div class='sub-desc'><p>to use for this computation.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Number</span><div class='sub-desc'><p>the wall clock time (System.currentTimeMillis()) when the\n next operation should be attempted -- immediately, if the return value is\n before the current time.</p>\n</div></li></ul></div></div></div><div id='method-onPermanentError' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-onPermanentError' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-onPermanentError' class='name expandable'>onPermanentError</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Report a permanent error that will not go away until further notice. ...</div><div class='long'><p>Report a permanent error that will not go away until further notice.\n No operation will be scheduled until <a href=\"#!/api/com.android.common.OperationScheduler-method-resetPermanentError\" rel=\"com.android.common.OperationScheduler-method-resetPermanentError\" class=\"docClass\">resetPermanentError</a>()\n is called.  Commonly used for authentication failures (which are reset\n when the accounts database is updated).</p>\n</div></div></div><div id='method-onSuccess' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-onSuccess' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-onSuccess' class='name expandable'>onSuccess</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Report successful completion of an operation. ...</div><div class='long'><p>Report successful completion of an operation.  Resets all error\n counters, clears any trigger directives, and records the success.</p>\n</div></div></div><div id='method-onTransientError' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-onTransientError' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-onTransientError' class='name expandable'>onTransientError</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Report a transient error (usually a network failure). ...</div><div class='long'><p>Report a transient error (usually a network failure).  Increments\n the error count and records the time of the latest error for backoff\n purposes.</p>\n</div></div></div><div id='method-parseOptions' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-parseOptions' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-parseOptions' class='name expandable'>parseOptions</a>( <span class='pre'>spec, options</span> ) : Object {com.android.common.OperationScheduler.Options}<span class=\"signature\"></span></div><div class='description'><div class='short'>Parse scheduler options supplied in this string form:\n\n backoff=(fixed)+(incremental)[+(exponential)] max=(maxmorator...</div><div class='long'><p>Parse scheduler options supplied in this string form:</p>\n\n<pre> backoff=(fixed)+(incremental)[+(exponential)] max=(maxmoratorium) min=(mintrigger) [period=](interval)\n </pre>\n\n\n<p> All values are times in (possibly fractional) <em>seconds</em> (not milliseconds).\n Omitted settings are left at whatever existing default value was passed in.</p>\n\n<p> <p>\n The default options: <code>backoff=0+5 max=86400 min=0 period=0</code><br>\n Fractions are OK: <code>backoff=+2.5 period=10.0</code><br>\n The \"period=\" can be omitted: <code>3600</code><br></p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>spec</span> : String<div class='sub-desc'><p>describing some or all scheduler options.</p>\n</div></li><li><span class='pre'>options</span> : Object {OperationScheduler.Options}<div class='sub-desc'><p>to update with parsed values.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object {com.android.common.OperationScheduler.Options}</span><div class='sub-desc'><p>the options passed in (for convenience)</p>\n</div></li></ul><h3 class='pa'>Throws</h3><ul><li><span class='pre'>Object</span><div class='sub-desc'><p>IllegalArgumentException if the syntax is invalid</p>\n</div></li></ul></div></div></div><div id='method-resetPermanentError' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-resetPermanentError' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-resetPermanentError' class='name expandable'>resetPermanentError</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Reset any permanent error status set by onPermanentError,\n allowing operations to be scheduled as normal. ...</div><div class='long'><p>Reset any permanent error status set by <a href=\"#!/api/com.android.common.OperationScheduler-method-onPermanentError\" rel=\"com.android.common.OperationScheduler-method-onPermanentError\" class=\"docClass\">onPermanentError</a>,\n allowing operations to be scheduled as normal.</p>\n</div></div></div><div id='method-resetTransientError' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-resetTransientError' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-resetTransientError' class='name expandable'>resetTransientError</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Reset all transient error counts, allowing the next operation to proceed\n immediately without backoff. ...</div><div class='long'><p>Reset all transient error counts, allowing the next operation to proceed\n immediately without backoff.  Commonly used on network state changes, when\n partial progress occurs (some data received), and in other circumstances\n where there is reason to hope things might start working better.</p>\n</div></div></div><div id='method-setEnabledState' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-setEnabledState' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-setEnabledState' class='name expandable'>setEnabledState</a>( <span class='pre'>enabled</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Enable or disable all operations. ...</div><div class='long'><p>Enable or disable all operations.  When disabled, all calls to\n <a href=\"#!/api/com.android.common.OperationScheduler-method-getNextTimeMillis\" rel=\"com.android.common.OperationScheduler-method-getNextTimeMillis\" class=\"docClass\">getNextTimeMillis</a> return Long.MAX_VALUE.\n Commonly used when data network availability goes up and down.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>enabled</span> : Boolean<div class='sub-desc'><p>if operations can be performed</p>\n</div></li></ul></div></div></div><div id='method-setMoratoriumTimeHttp' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-setMoratoriumTimeHttp' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-setMoratoriumTimeHttp' class='name expandable'>setMoratoriumTimeHttp</a>( <span class='pre'>retryAfter</span> ) : Boolean<span class=\"signature\"></span></div><div class='description'><div class='short'>Forbid any operations until after a certain time, as specified in\n the format used by the HTTP \"Retry-After\" header. ...</div><div class='long'><p>Forbid any operations until after a certain time, as specified in\n the format used by the HTTP \"Retry-After\" header.\n Limited by <a href=\"#!/api/com.android.common.OperationScheduler.Options-property-maxMoratoriumMillis\" rel=\"com.android.common.OperationScheduler.Options-property-maxMoratoriumMillis\" class=\"docClass\">com.android.common.OperationScheduler.Options.maxMoratoriumMillis</a>.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>retryAfter</span> : String<div class='sub-desc'><p>moratorium time in HTTP format</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Boolean</span><div class='sub-desc'><p>true if a time was successfully parsed</p>\n</div></li></ul></div></div></div><div id='method-setMoratoriumTimeMillis' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-setMoratoriumTimeMillis' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-setMoratoriumTimeMillis' class='name expandable'>setMoratoriumTimeMillis</a>( <span class='pre'>millis</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Forbid any operations until after a certain (absolute) time. ...</div><div class='long'><p>Forbid any operations until after a certain (absolute) time.\n Limited by <a href=\"#!/api/com.android.common.OperationScheduler.Options-property-maxMoratoriumMillis\" rel=\"com.android.common.OperationScheduler.Options-property-maxMoratoriumMillis\" class=\"docClass\">com.android.common.OperationScheduler.Options.maxMoratoriumMillis</a>.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>millis</span> : Number<div class='sub-desc'><p>wall clock time (System.currentTimeMillis())\n when operations should be allowed again; 0 to remove moratorium</p>\n</div></li></ul></div></div></div><div id='method-setTriggerTimeMillis' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-setTriggerTimeMillis' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-setTriggerTimeMillis' class='name expandable'>setTriggerTimeMillis</a>( <span class='pre'>millis</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Request an operation to be performed at a certain time. ...</div><div class='long'><p>Request an operation to be performed at a certain time.  The actual\n scheduled time may be affected by error backoff logic and defined\n minimum intervals.  Use Long.MAX_VALUE to disable triggering.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>millis</span> : Number<div class='sub-desc'><p>wall clock time (System.currentTimeMillis()) to\n trigger another operation; 0 to trigger immediately</p>\n</div></li></ul></div></div></div><div id='method-toString' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.common.OperationScheduler'>com.android.common.OperationScheduler</span><br/><a href='source/OperationScheduler.html#com-android-common-OperationScheduler-method-toString' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.common.OperationScheduler-method-toString' class='name expandable'>toString</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Return a string description of the scheduler state for debugging. ...</div><div class='long'><p>Return a string description of the scheduler state for debugging.</p>\n</div></div></div></div></div></div></div>","meta":{}});