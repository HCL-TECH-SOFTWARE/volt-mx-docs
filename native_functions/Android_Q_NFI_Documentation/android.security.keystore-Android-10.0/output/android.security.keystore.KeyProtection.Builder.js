Ext.data.JsonP.android_security_keystore_KeyProtection_Builder({"tagname":"class","name":"android.security.keystore.KeyProtection.Builder","autodetected":{},"files":[{"filename":"Builder.js","href":"Builder.html#android-security-keystore-KeyProtection-Builder"}],"extends":"java.lang.Object","members":[{"name":"build","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-build","meta":{}},{"name":"setBlockModes","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setBlockModes","meta":{}},{"name":"setDigests","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setDigests","meta":{}},{"name":"setEncryptionPaddings","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setEncryptionPaddings","meta":{}},{"name":"setInvalidatedByBiometricEnrollment","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setInvalidatedByBiometricEnrollment","meta":{}},{"name":"setKeyValidityEnd","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setKeyValidityEnd","meta":{}},{"name":"setKeyValidityForConsumptionEnd","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setKeyValidityForConsumptionEnd","meta":{}},{"name":"setKeyValidityForOriginationEnd","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setKeyValidityForOriginationEnd","meta":{}},{"name":"setKeyValidityStart","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setKeyValidityStart","meta":{}},{"name":"setRandomizedEncryptionRequired","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setRandomizedEncryptionRequired","meta":{}},{"name":"setSignaturePaddings","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setSignaturePaddings","meta":{}},{"name":"setUnlockedDeviceRequired","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setUnlockedDeviceRequired","meta":{}},{"name":"setUserAuthenticationRequired","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setUserAuthenticationRequired","meta":{}},{"name":"setUserAuthenticationValidWhileOnBody","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setUserAuthenticationValidWhileOnBody","meta":{}},{"name":"setUserAuthenticationValidityDurationSeconds","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setUserAuthenticationValidityDurationSeconds","meta":{}},{"name":"setUserConfirmationRequired","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setUserConfirmationRequired","meta":{}},{"name":"setUserPresenceRequired","tagname":"method","owner":"android.security.keystore.KeyProtection.Builder","id":"method-setUserPresenceRequired","meta":{}}],"alternateClassNames":[],"aliases":{},"id":"class-android.security.keystore.KeyProtection.Builder","classIcon":"icon-class","superclasses":["java.lang.Object"],"subclasses":[],"mixedInto":[],"mixins":[],"parentMixins":[],"requires":[],"uses":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>java.lang.Object<div class='subclass '><strong>android.security.keystore.KeyProtection.Builder</strong></div></div><h4>Files</h4><div class='dependency'><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder' target='_blank'>Builder.js</a></div></pre><div class='doc-contents'><p>Builder of <a href=\"#!/api/android.security.keystore.KeyProtection\" rel=\"android.security.keystore.KeyProtection\" class=\"docClass\">android.security.keystore.KeyProtection</a> instances.</p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-build' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-build' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-build' class='name expandable'>build</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Builds an instance of android.security.keystore.KeyProtection. ...</div><div class='long'><p>Builds an instance of <a href=\"#!/api/android.security.keystore.KeyProtection\" rel=\"android.security.keystore.KeyProtection\" class=\"docClass\">android.security.keystore.KeyProtection</a>.</p>\n<h3 class='pa'>Throws</h3><ul><li><span class='pre'>Object</span><div class='sub-desc'><p>IllegalArgumentException if a required field is missing</p>\n</div></li></ul></div></div></div><div id='method-setBlockModes' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setBlockModes' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setBlockModes' class='name expandable'>setBlockModes</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the set of block modes (e.g., {@code GCM}, {@code CBC}) with which the key can be\n used when encrypting/decrypting. ...</div><div class='long'><p>Sets the set of block modes (e.g., {@code GCM}, {@code CBC}) with which the key can be\n used when encrypting/decrypting. Attempts to use the key with any other block modes will\n be rejected.</p>\n\n<p> <p>This must be specified for symmetric encryption/decryption keys.</p>\n\n<p> <p>See <a href=\"#!/api/android.security.keystore.KeyProperties\" rel=\"android.security.keystore.KeyProperties\" class=\"docClass\">android.security.keystore.KeyProperties</a>.{@code BLOCK_MODE} constants.</p>\n</div></div></div><div id='method-setDigests' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setDigests' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setDigests' class='name expandable'>setDigests</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the set of digest algorithms (e.g., {@code SHA-256}, {@code SHA-384}) with which the\n key can be used. ...</div><div class='long'><p>Sets the set of digest algorithms (e.g., {@code SHA-256}, {@code SHA-384}) with which the\n key can be used. Attempts to use the key with any other digest algorithm will be\n rejected.</p>\n\n<p> <p>This must be specified for signing/verification keys and RSA encryption/decryption\n keys used with RSA OAEP padding scheme because these operations involve a digest. For\n HMAC keys, the default is the digest specified in Key.getAlgorithm() (e.g.,\n {@code SHA-256} for key algorithm {@code HmacSHA256}). HMAC keys cannot be authorized\n for more than one digest.</p>\n\n<p> <p>For private keys used for TLS/SSL client or server authentication it is usually\n necessary to authorize the use of no digest (<a href=\"#!/api/android.security.keystore.KeyProperties-property-DIGEST_NONE\" rel=\"android.security.keystore.KeyProperties-property-DIGEST_NONE\" class=\"docClass\">android.security.keystore.KeyProperties.DIGEST_NONE</a>). This is\n because TLS/SSL stacks typically generate the necessary digest(s) themselves and then use\n a private key to sign it.</p>\n\n<p> <p>See <a href=\"#!/api/android.security.keystore.KeyProperties\" rel=\"android.security.keystore.KeyProperties\" class=\"docClass\">android.security.keystore.KeyProperties</a>.{@code DIGEST} constants.</p>\n</div></div></div><div id='method-setEncryptionPaddings' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setEncryptionPaddings' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setEncryptionPaddings' class='name expandable'>setEncryptionPaddings</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the set of padding schemes (e.g., {@code OAEPPadding}, {@code PKCS7Padding},\n {@code NoPadding}) with which the ...</div><div class='long'><p>Sets the set of padding schemes (e.g., {@code OAEPPadding}, {@code PKCS7Padding},\n {@code NoPadding}) with which the key can be used when encrypting/decrypting. Attempts to\n use the key with any other padding scheme will be rejected.</p>\n\n<p> <p>This must be specified for keys which are used for encryption/decryption.</p>\n\n<p> <p>For RSA private keys used by TLS/SSL servers to authenticate themselves to clients it\n is usually necessary to authorize the use of no/any padding\n (<a href=\"#!/api/android.security.keystore.KeyProperties-property-ENCRYPTION_PADDING_NONE\" rel=\"android.security.keystore.KeyProperties-property-ENCRYPTION_PADDING_NONE\" class=\"docClass\">android.security.keystore.KeyProperties.ENCRYPTION_PADDING_NONE</a>) and/or PKCS#1 encryption padding\n (<a href=\"#!/api/android.security.keystore.KeyProperties-property-ENCRYPTION_PADDING_RSA_PKCS1\" rel=\"android.security.keystore.KeyProperties-property-ENCRYPTION_PADDING_RSA_PKCS1\" class=\"docClass\">android.security.keystore.KeyProperties.ENCRYPTION_PADDING_RSA_PKCS1</a>). This is because RSA decryption is\n required by some cipher suites, and some stacks request decryption using no padding\n whereas others request PKCS#1 padding.</p>\n\n<p> <p>See <a href=\"#!/api/android.security.keystore.KeyProperties\" rel=\"android.security.keystore.KeyProperties\" class=\"docClass\">android.security.keystore.KeyProperties</a>.{@code ENCRYPTION_PADDING} constants.</p>\n</div></div></div><div id='method-setInvalidatedByBiometricEnrollment' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setInvalidatedByBiometricEnrollment' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setInvalidatedByBiometricEnrollment' class='name expandable'>setInvalidatedByBiometricEnrollment</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets whether this key should be invalidated on biometric enrollment. ...</div><div class='long'><p>Sets whether this key should be invalidated on biometric enrollment.  This\n applies only to keys which require user authentication (see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" class=\"docClass\">setUserAuthenticationRequired</a>(boolean)) and if no positive validity duration has been\n set (see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" class=\"docClass\">setUserAuthenticationValidityDurationSeconds</a>(int), meaning the key is\n valid for biometric authentication only.</p>\n\n<p> <p>By default, {@code invalidateKey} is {@code true}, so keys that are valid for\n biometric authentication only are <em>irreversibly invalidated</em> when a new\n biometric is enrolled, or when all existing biometrics are deleted.  That may be\n changed by calling this method with {@code invalidateKey} set to {@code false}.</p>\n\n<p> <p>Invalidating keys on enrollment of a new biometric or unenrollment of all biometrics\n improves security by ensuring that an unauthorized person who obtains the password can't\n gain the use of biometric-authenticated keys by enrolling their own biometric.  However,\n invalidating keys makes key-dependent operations impossible, requiring some fallback\n procedure to authenticate the user and set up a new key.</p>\n</div></div></div><div id='method-setKeyValidityEnd' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setKeyValidityEnd' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityEnd' class='name expandable'>setKeyValidityEnd</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the time instant after which the key is no longer valid. ...</div><div class='long'><p>Sets the time instant after which the key is no longer valid.</p>\n\n<p> <p>By default, the key is valid at any instant.\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityStart\" rel=\"android.security.keystore.KeyProtection.Builder-method-setKeyValidityStart\" class=\"docClass\">setKeyValidityStart</a>(Date)\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityForConsumptionEnd\" rel=\"android.security.keystore.KeyProtection.Builder-method-setKeyValidityForConsumptionEnd\" class=\"docClass\">setKeyValidityForConsumptionEnd</a>(Date)\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityForOriginationEnd\" rel=\"android.security.keystore.KeyProtection.Builder-method-setKeyValidityForOriginationEnd\" class=\"docClass\">setKeyValidityForOriginationEnd</a>(Date)</p>\n</div></div></div><div id='method-setKeyValidityForConsumptionEnd' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setKeyValidityForConsumptionEnd' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityForConsumptionEnd' class='name expandable'>setKeyValidityForConsumptionEnd</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the time instant after which the key is no longer valid for decryption and\n verification. ...</div><div class='long'><p>Sets the time instant after which the key is no longer valid for decryption and\n verification.</p>\n\n<p> <p>By default, the key is valid at any instant.\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityForOriginationEnd\" rel=\"android.security.keystore.KeyProtection.Builder-method-setKeyValidityForOriginationEnd\" class=\"docClass\">setKeyValidityForOriginationEnd</a>(Date)</p>\n</div></div></div><div id='method-setKeyValidityForOriginationEnd' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setKeyValidityForOriginationEnd' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityForOriginationEnd' class='name expandable'>setKeyValidityForOriginationEnd</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the time instant after which the key is no longer valid for encryption and signing. ...</div><div class='long'><p>Sets the time instant after which the key is no longer valid for encryption and signing.</p>\n\n<p> <p>By default, the key is valid at any instant.\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityForConsumptionEnd\" rel=\"android.security.keystore.KeyProtection.Builder-method-setKeyValidityForConsumptionEnd\" class=\"docClass\">setKeyValidityForConsumptionEnd</a>(Date)</p>\n</div></div></div><div id='method-setKeyValidityStart' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setKeyValidityStart' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityStart' class='name expandable'>setKeyValidityStart</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the time instant before which the key is not yet valid. ...</div><div class='long'><p>Sets the time instant before which the key is not yet valid.</p>\n\n<p> <p>By default, the key is valid at any instant.\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setKeyValidityEnd\" rel=\"android.security.keystore.KeyProtection.Builder-method-setKeyValidityEnd\" class=\"docClass\">setKeyValidityEnd</a>(Date)</p>\n</div></div></div><div id='method-setRandomizedEncryptionRequired' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setRandomizedEncryptionRequired' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setRandomizedEncryptionRequired' class='name expandable'>setRandomizedEncryptionRequired</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets whether encryption using this key must be sufficiently randomized to produce\n different ciphertexts for the same...</div><div class='long'><p>Sets whether encryption using this key must be sufficiently randomized to produce\n different ciphertexts for the same plaintext every time. The formal cryptographic\n property being required is <em>indistinguishability under chosen-plaintext attack\n ({@code IND-CPA})</em>. This property is important because it mitigates several classes\n of weaknesses due to which ciphertext may leak information about plaintext. For example,\n if a given plaintext always produces the same ciphertext, an attacker may see the\n repeated ciphertexts and be able to deduce something about the plaintext.</p>\n\n<p> <p>By default, {@code IND-CPA} is required.</p>\n\n<p> <p>When {@code IND-CPA} is required:\n <ul>\n <li>transformation which do not offer {@code IND-CPA}, such as symmetric ciphers using\n {@code ECB} mode or RSA encryption without padding, are prohibited;</li>\n <li>in transformations which use an IV, such as symmetric ciphers in {@code GCM},\n {@code CBC}, and {@code CTR} block modes, caller-provided IVs are rejected when\n encrypting, to ensure that only random IVs are used.</li></ul></p>\n\n<p> <p>Before disabling this requirement, consider the following approaches instead:\n <ul>\n <li>If you are generating a random IV for encryption and then initializing a {@code}\n Cipher using the IV, the solution is to let the {@code Cipher} generate a random IV\n instead. This will occur if the {@code Cipher} is initialized for encryption without an\n IV. The IV can then be queried via Cipher.getIV().</li>\n <li>If you are generating a non-random IV (e.g., an IV derived from something not fully\n random, such as the name of the file being encrypted, or transaction ID, or password,\n or a device identifier), consider changing your design to use a random IV which will then\n be provided in addition to the ciphertext to the entities which need to decrypt the\n ciphertext.</li>\n <li>If you are using RSA encryption without padding, consider switching to padding\n schemes which offer {@code IND-CPA}, such as PKCS#1 or OAEP.</li>\n </ul></p>\n</div></div></div><div id='method-setSignaturePaddings' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setSignaturePaddings' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setSignaturePaddings' class='name expandable'>setSignaturePaddings</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the set of padding schemes (e.g., {@code PSS}, {@code PKCS#1}) with which the key\n can be used when signing/veri...</div><div class='long'><p>Sets the set of padding schemes (e.g., {@code PSS}, {@code PKCS#1}) with which the key\n can be used when signing/verifying. Attempts to use the key with any other padding scheme\n will be rejected.</p>\n\n<p> <p>This must be specified for RSA keys which are used for signing/verification.</p>\n\n<p> <p>See <a href=\"#!/api/android.security.keystore.KeyProperties\" rel=\"android.security.keystore.KeyProperties\" class=\"docClass\">android.security.keystore.KeyProperties</a>.{@code SIGNATURE_PADDING} constants.</p>\n</div></div></div><div id='method-setUnlockedDeviceRequired' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setUnlockedDeviceRequired' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setUnlockedDeviceRequired' class='name expandable'>setUnlockedDeviceRequired</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets whether the keystore requires the screen to be unlocked before allowing decryption\n using this key. ...</div><div class='long'><p>Sets whether the keystore requires the screen to be unlocked before allowing decryption\n using this key. If this is set to {@code true}, any attempt to decrypt or sign using this\n key while the screen is locked will fail. A locked device requires a PIN, password,\n biometric, or other trusted factor to access. While the screen is locked, the key can\n still be used for encryption or signature verification.</p>\n</div></div></div><div id='method-setUserAuthenticationRequired' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setUserAuthenticationRequired' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired' class='name expandable'>setUserAuthenticationRequired</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets whether this key is authorized to be used only if the user has been authenticated. ...</div><div class='long'><p>Sets whether this key is authorized to be used only if the user has been authenticated.</p>\n\n<p> <p>By default, the key is authorized to be used regardless of whether the user has been\n authenticated.</p>\n\n<p> <p>When user authentication is required:\n <ul>\n <li>The key can only be import if secure lock screen is set up (see\n KeyguardManager.isDeviceSecure()). Additionally, if the key requires that user\n authentication takes place for every use of the key (see\n <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" class=\"docClass\">setUserAuthenticationValidityDurationSeconds</a>(int)), at least one biometric\n must be enrolled (see BiometricManager.canAuthenticate()).</li>\n <li>The use of the key must be authorized by the user by authenticating to this Android\n device using a subset of their secure lock screen credentials such as\n password/PIN/pattern or biometric.\n <a href=\"{@docRoot}training/articles/keystore.html#UserAuthentication\">More\n information</a>.\n <li>The key will become <em>irreversibly invalidated</em> once the secure lock screen is\n disabled (reconfigured to None, Swipe or other mode which does not authenticate the user)\n or when the secure lock screen is forcibly reset (e.g., by a Device Administrator).\n Additionally, if the key requires that user authentication takes place for every use of\n the key, it is also irreversibly invalidated once a new biometric is enrolled or once\\\n no more biometrics are enrolled, unless <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setInvalidatedByBiometricEnrollment\" rel=\"android.security.keystore.KeyProtection.Builder-method-setInvalidatedByBiometricEnrollment\" class=\"docClass\">setInvalidatedByBiometricEnrollment</a>(boolean) is used to allow validity after\n enrollment. Attempts to initialize cryptographic operations using such keys will throw\n <a href=\"#!/api/android.security.keystore.KeyPermanentlyInvalidatedException\" rel=\"android.security.keystore.KeyPermanentlyInvalidatedException\" class=\"docClass\">android.security.keystore.KeyPermanentlyInvalidatedException</a>.</li> </li></ul></p>\n\n<p> <p>This authorization applies only to secret key and private key operations. Public key\n operations are not restricted.\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" class=\"docClass\">setUserAuthenticationValidityDurationSeconds</a>(int)\n@see KeyguardManager#isDeviceSecure()\n@see BiometricManager#canAuthenticate()</p>\n</div></div></div><div id='method-setUserAuthenticationValidWhileOnBody' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setUserAuthenticationValidWhileOnBody' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidWhileOnBody' class='name expandable'>setUserAuthenticationValidWhileOnBody</a>( <span class='pre'>remainsValid</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets whether the key will remain authorized only until the device is removed from the\n user's body up to the limit of...</div><div class='long'><p>Sets whether the key will remain authorized only until the device is removed from the\n user's body up to the limit of the authentication validity period (see\n <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds\" class=\"docClass\">setUserAuthenticationValidityDurationSeconds</a> and\n <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" class=\"docClass\">setUserAuthenticationRequired</a>). Once the device has been removed from the\n user's body, the key will be considered unauthorized and the user will need to\n re-authenticate to use it. For keys without an authentication validity period this\n parameter has no effect.</p>\n\n<p> <p>Similarly, on devices that do not have an on-body sensor, this parameter will have no\n effect; the device will always be considered to be \"on-body\" and the key will therefore\n remain authorized until the validity period ends.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>remainsValid</span> : Boolean<div class='sub-desc'><p>if {@code true}, and if the device supports on-body detection, key\n will be invalidated when the device is removed from the user's body or when the\n authentication validity expires, whichever occurs first.</p>\n</div></li></ul></div></div></div><div id='method-setUserAuthenticationValidityDurationSeconds' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setUserAuthenticationValidityDurationSeconds' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationValidityDurationSeconds' class='name expandable'>setUserAuthenticationValidityDurationSeconds</a>( <span class='pre'>seconds</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets the duration of time (seconds) for which this key is authorized to be used after the\n user is successfully authe...</div><div class='long'><p>Sets the duration of time (seconds) for which this key is authorized to be used after the\n user is successfully authenticated. This has effect if the key requires user\n authentication for its use (see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" class=\"docClass\">setUserAuthenticationRequired</a>(boolean)).</p>\n\n<p> <p>By default, if user authentication is required, it must take place for every use of\n the key.</p>\n\n<p> <p>Cryptographic operations involving keys which require user authentication to take\n place for every operation can only use biometric authentication. This is achieved by\n initializing a cryptographic operation (Signature, Cipher, Mac)\n with the key, wrapping it into a BiometricPrompt.CryptoObject, invoking\n {@code BiometricPrompt.authenticate} with {@code CryptoObject}, and proceeding with\n the cryptographic operation only if the authentication flow succeeds.</p>\n\n<p> <p>Cryptographic operations involving keys which are authorized to be used for a duration\n of time after a successful user authentication event can only use secure lock screen\n authentication. These cryptographic operations will throw\n <a href=\"#!/api/android.security.keystore.UserNotAuthenticatedException\" rel=\"android.security.keystore.UserNotAuthenticatedException\" class=\"docClass\">android.security.keystore.UserNotAuthenticatedException</a> during initialization if the user needs to be\n authenticated to proceed. This situation can be resolved by the user unlocking the secure\n lock screen of the Android or by going through the confirm credential flow initiated by\n CharSequence).\n Once resolved, initializing a new cryptographic operation using this key (or any other\n key which is authorized to be used for a fixed duration of time after user\n authentication) should succeed provided the user authentication flow completed\n successfully.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>seconds</span> : Number<div class='sub-desc'><p>duration in seconds or {@code -1} if user authentication must take place\n        for every use of the key.\n@see <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" class=\"docClass\">setUserAuthenticationRequired</a>(boolean)\n@see BiometricPrompt\n@see BiometricPrompt.CryptoObject\n@see KeyguardManager</p>\n</div></li></ul></div></div></div><div id='method-setUserConfirmationRequired' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setUserConfirmationRequired' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setUserConfirmationRequired' class='name expandable'>setUserConfirmationRequired</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets whether this key is authorized to be used only for messages confirmed by the\n user. ...</div><div class='long'><p>Sets whether this key is authorized to be used only for messages confirmed by the\n user.</p>\n\n<p> Confirmation is separate from user authentication (see\n <a href=\"#!/api/android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" rel=\"android.security.keystore.KeyProtection.Builder-method-setUserAuthenticationRequired\" class=\"docClass\">setUserAuthenticationRequired</a>(boolean)). Keys can be created that require\n confirmation but not user authentication, or user authentication but not confirmation,\n or both. Confirmation verifies that some user with physical possession of the device has\n approved a displayed message. User authentication verifies that the correct user is\n present and has authenticated.</p>\n\n<p> <p>This authorization applies only to secret key and private key operations. Public key\n operations are not restricted.</p>\n\n<p> See android.security.ConfirmationPrompt class for\n more details about user confirmations.</p>\n</div></div></div><div id='method-setUserPresenceRequired' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='android.security.keystore.KeyProtection.Builder'>android.security.keystore.KeyProtection.Builder</span><br/><a href='source/Builder.html#android-security-keystore-KeyProtection-Builder-method-setUserPresenceRequired' target='_blank' class='view-source'>view source</a></div><a href='#!/api/android.security.keystore.KeyProtection.Builder-method-setUserPresenceRequired' class='name expandable'>setUserPresenceRequired</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Sets whether a test of user presence is required to be performed between the\n {@code Signature.initSign()} and {@code...</div><div class='long'><p>Sets whether a test of user presence is required to be performed between the\n {@code Signature.initSign()} and {@code Signature.sign()} method calls. It requires that\n the KeyStore implementation have a direct way to validate the user presence for example\n a KeyStore hardware backed strongbox can use a button press that is observable in\n hardware. A test for user presence is tangential to authentication. The test can be part\n of an authentication step as long as this step can be validated by the hardware\n protecting the key and cannot be spoofed. For example, a physical button press can be\n used as a test of user presence if the other pins connected to the button are not able\n to simulate a button press. There must be no way for the primary processor to fake a\n button press, or that button must not be used as a test of user presence.</p>\n</div></div></div></div></div></div></div>","meta":{}});