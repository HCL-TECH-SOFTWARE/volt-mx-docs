Ext.data.JsonP.com_android_internal_os_KernelCpuThreadReaderDiff({"tagname":"class","name":"com.android.internal.os.KernelCpuThreadReaderDiff","autodetected":{},"files":[{"filename":"KernelCpuThreadReaderDiff.js","href":"KernelCpuThreadReaderDiff.html#com-android-internal-os-KernelCpuThreadReaderDiff"}],"extends":"java.lang.Object","hide":true,"members":[{"name":"getCpuFrequenciesKhz","tagname":"method","owner":"com.android.internal.os.KernelCpuThreadReaderDiff","id":"method-getCpuFrequenciesKhz","meta":{}},{"name":"getProcessCpuUsageDiffed","tagname":"method","owner":"com.android.internal.os.KernelCpuThreadReaderDiff","id":"method-getProcessCpuUsageDiffed","meta":{}}],"alternateClassNames":[],"aliases":{},"id":"class-com.android.internal.os.KernelCpuThreadReaderDiff","short_doc":"Delegates per-thread CPU collection to com.android.internal.os.KernelCpuThreadReader, and calculates the\n difference ...","classIcon":"icon-class","superclasses":["java.lang.Object"],"subclasses":[],"mixedInto":[],"mixins":[],"parentMixins":[],"requires":[],"uses":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>java.lang.Object<div class='subclass '><strong>com.android.internal.os.KernelCpuThreadReaderDiff</strong></div></div><h4>Files</h4><div class='dependency'><a href='source/KernelCpuThreadReaderDiff.html#com-android-internal-os-KernelCpuThreadReaderDiff' target='_blank'>KernelCpuThreadReaderDiff.js</a></div></pre><div class='doc-contents'><p>Delegates per-thread CPU collection to <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReader\" rel=\"com.android.internal.os.KernelCpuThreadReader\" class=\"docClass\">com.android.internal.os.KernelCpuThreadReader</a>, and calculates the\n difference between CPU usage at each call of <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" rel=\"com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" class=\"docClass\">getProcessCpuUsageDiffed</a>().</p>\n\n<p> <p>Some notes on the diff calculation:</p>\n\n<p> <ul>\n   <li>The diffing is done between each call of <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" rel=\"com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" class=\"docClass\">getProcessCpuUsageDiffed</a>(), i.e. call N\n       of this method will return CPU used by threads between call N-1 and N.\n   <li>The first call of <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" rel=\"com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" class=\"docClass\">getProcessCpuUsageDiffed</a>() will return no processes (\"first\n       call\" is the first call in the lifetime of a <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReaderDiff\" rel=\"com.android.internal.os.KernelCpuThreadReaderDiff\" class=\"docClass\">com.android.internal.os.KernelCpuThreadReaderDiff</a> object).\n   <li>If a thread does not exist at call N, but does exist at call N+1, the diff will assume that\n       the CPU usage at call N was zero. Thus, the diff reported will be equivalent to the value\n       returned by com.android.internal.os.KernelCpuThreadReader.getProcessCpuUsage() at call N+1.\n   <li>If an error occurs in <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReader\" rel=\"com.android.internal.os.KernelCpuThreadReader\" class=\"docClass\">com.android.internal.os.KernelCpuThreadReader</a> at call N, we will return no\n       information for CPU usage between call N-1 and N (as we don't know the start value) and\n       between N and N+1 (as we don't know the end value). Assuming all other calls are\n       successful, the next call to return data will be N+2, for the period between N+1 and N+2.\n   <li>If an error occurs in this class (but not in <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReader\" rel=\"com.android.internal.os.KernelCpuThreadReader\" class=\"docClass\">com.android.internal.os.KernelCpuThreadReader</a>) at call N, the\n       data will only be dropped for call N, as we can still use the CPU data for the surrounding\n       calls.\n </li></li></li></li></li></ul></p>\n\n<p> <p>Additionally to diffing, this class also contains logic for thresholding reported threads. A\n thread will not be reported unless its total CPU usage is at least equal to the value set in\n setMinimumTotalCpuUsageMillis. Filtered thread CPU usage is summed and reported under\n one \"other threads\" thread. This reduces the cardinality of the <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" rel=\"com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed\" class=\"docClass\">getProcessCpuUsageDiffed</a>() result.</p>\n\n<p> <p>Thresholding is done in this class, instead of <a href=\"#!/api/com.android.internal.os.KernelCpuThreadReader\" rel=\"com.android.internal.os.KernelCpuThreadReader\" class=\"docClass\">com.android.internal.os.KernelCpuThreadReader</a>, and instead of\n WestWorld, because the thresholding should be done after diffing, not before. This is because of\n two issues with thresholding before diffing:</p>\n\n<p> <ul>\n   <li>We would threshold less and less threads as thread uptime increases.\n   <li>We would encounter errors as the filtered threads become unfiltered, as the \"other threads\"\n       result could have negative diffs, and the newly unfiltered threads would have incorrect\n       diffs that include CPU usage from when they were filtered.\n </li></li></ul></p>\n\n<p> Only for use within the system server</p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-getCpuFrequenciesKhz' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.KernelCpuThreadReaderDiff'>com.android.internal.os.KernelCpuThreadReaderDiff</span><br/><a href='source/KernelCpuThreadReaderDiff.html#com-android-internal-os-KernelCpuThreadReaderDiff-method-getCpuFrequenciesKhz' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.KernelCpuThreadReaderDiff-method-getCpuFrequenciesKhz' class='name expandable'>getCpuFrequenciesKhz</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>@see KernelCpuThreadReader#getCpuFrequenciesKhz() ...</div><div class='long'><p>@see KernelCpuThreadReader#getCpuFrequenciesKhz()</p>\n</div></div></div><div id='method-getProcessCpuUsageDiffed' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.KernelCpuThreadReaderDiff'>com.android.internal.os.KernelCpuThreadReaderDiff</span><br/><a href='source/KernelCpuThreadReaderDiff.html#com-android-internal-os-KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.KernelCpuThreadReaderDiff-method-getProcessCpuUsageDiffed' class='name expandable'>getProcessCpuUsageDiffed</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Returns the difference in CPU usage since the last time this method was called. ...</div><div class='long'><p>Returns the difference in CPU usage since the last time this method was called.\n@see KernelCpuThreadReader#getProcessCpuUsage()</p>\n</div></div></div></div></div></div></div>","meta":{}});