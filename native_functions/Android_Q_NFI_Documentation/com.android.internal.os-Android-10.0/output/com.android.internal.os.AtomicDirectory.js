Ext.data.JsonP.com_android_internal_os_AtomicDirectory({"tagname":"class","name":"com.android.internal.os.AtomicDirectory","autodetected":{},"files":[{"filename":"AtomicDirectory.js","href":"AtomicDirectory.html#com-android-internal-os-AtomicDirectory"}],"extends":"java.lang.Object","members":[{"name":"closeWrite","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-closeWrite","meta":{}},{"name":"delete","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-delete","meta":{}},{"name":"exists","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-exists","meta":{}},{"name":"failWrite","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-failWrite","meta":{}},{"name":"finishRead","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-finishRead","meta":{}},{"name":"finishWrite","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-finishWrite","meta":{}},{"name":"getBackupDirectory","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-getBackupDirectory","meta":{}},{"name":"openWrite","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-openWrite","meta":{}},{"name":"startRead","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-startRead","meta":{}},{"name":"startWrite","tagname":"method","owner":"com.android.internal.os.AtomicDirectory","id":"method-startWrite","meta":{}}],"alternateClassNames":[],"aliases":{},"id":"class-com.android.internal.os.AtomicDirectory","short_doc":"Helper class for performing atomic operations on a directory, by creating a\n backup directory until a write has succe...","classIcon":"icon-class","superclasses":["java.lang.Object"],"subclasses":[],"mixedInto":[],"mixins":[],"parentMixins":[],"requires":[],"uses":[],"html":"<div><pre class=\"hierarchy\"><h4>Hierarchy</h4><div class='subclass first-child'>java.lang.Object<div class='subclass '><strong>com.android.internal.os.AtomicDirectory</strong></div></div><h4>Files</h4><div class='dependency'><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory' target='_blank'>AtomicDirectory.js</a></div></pre><div class='doc-contents'><p>Helper class for performing atomic operations on a directory, by creating a\n backup directory until a write has successfully completed.\n <p>\n Atomic directory guarantees directory integrity by ensuring that a directory has\n been completely written and sync'd to disk before removing its backup.\n As long as the backup directory exists, the original directory is considered\n to be invalid (leftover from a previous attempt to write).\n <p>\n Atomic directory does not confer any file locking semantics. Do not use this\n class when the directory may be accessed or modified concurrently\n by multiple threads or processes. The caller is responsible for ensuring\n appropriate mutual exclusion invariants whenever it accesses the directory.\n <p>\n To ensure atomicity you must always use this class to interact with the\n backing directory when checking existence, making changes, and deleting.</p>\n</div><div class='members'><div class='members-section'><div class='definedBy'>Defined By</div><h3 class='members-title icon-method'>Methods</h3><div class='subsection'><div id='method-closeWrite' class='member first-child not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-closeWrite' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-closeWrite' class='name expandable'>closeWrite</a>( <span class='pre'>destination</span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Closes a previously opened file. ...</div><div class='long'><p>Closes a previously opened file.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>destination</span> : Object {FileOutputStream}<div class='sub-desc'><p>The stream to the file returned by openWrite(File).\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-openWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-openWrite\" class=\"docClass\">openWrite</a>(File)</p>\n</div></li></ul></div></div></div><div id='method-delete' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-delete' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-delete' class='name expandable'>delete</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Deletes this directory. ...</div><div class='long'><p>Deletes this directory.</p>\n</div></div></div><div id='method-exists' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-exists' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-exists' class='name expandable'>exists</a>( <span class='pre'></span> ) : Boolean<span class=\"signature\"></span></div><div class='description'><div class='short'> ...</div><div class='long'>\n<h3 class='pa'>Returns</h3><ul><li><span class='pre'>Boolean</span><div class='sub-desc'><p>Whether this directory exists.</p>\n</div></li></ul></div></div></div><div id='method-failWrite' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-failWrite' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-failWrite' class='name expandable'>failWrite</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Finishes the edit and discards all changes. ...</div><div class='long'><p>Finishes the edit and discards all changes.\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-startWrite\" class=\"docClass\">startWrite</a>()</p>\n</div></div></div><div id='method-finishRead' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-finishRead' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-finishRead' class='name expandable'>finishRead</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Finishes reading this directory. ...</div><div class='long'><p>Finishes reading this directory.\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startRead\" rel=\"com.android.internal.os.AtomicDirectory-method-startRead\" class=\"docClass\">startRead</a>()\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-startWrite\" class=\"docClass\">startWrite</a>()</p>\n</div></div></div><div id='method-finishWrite' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-finishWrite' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-finishWrite' class='name expandable'>finishWrite</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Finishes the edit and commits all changes. ...</div><div class='long'><p>Finishes the edit and commits all changes.\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-startWrite\" class=\"docClass\">startWrite</a>()</p>\n<h3 class='pa'>Throws</h3><ul><li><span class='pre'>Object</span><div class='sub-desc'><p>IllegalStateException is some files are not closed.</p>\n</div></li></ul></div></div></div><div id='method-getBackupDirectory' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-getBackupDirectory' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-getBackupDirectory' class='name expandable'>getBackupDirectory</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Gets the backup directory if present. ...</div><div class='long'><p>Gets the backup directory if present. This could be useful if you are\n writing new state to the dir but need to access the last persisted state\n at the same time. This means that this call is useful in between\n <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-startWrite\" class=\"docClass\">startWrite</a>() and <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-finishWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-finishWrite\" class=\"docClass\">finishWrite</a>() or <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-failWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-failWrite\" class=\"docClass\">failWrite</a>().\n You should not modify the content returned by this method.\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startRead\" rel=\"com.android.internal.os.AtomicDirectory-method-startRead\" class=\"docClass\">startRead</a>()</p>\n</div></div></div><div id='method-openWrite' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-openWrite' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-openWrite' class='name expandable'>openWrite</a>( <span class='pre'>file</span> ) : Object {java.io.FileOutputStream}<span class=\"signature\"></span></div><div class='description'><div class='short'>Opens a file in this directory for writing. ...</div><div class='long'><p>Opens a file in this directory for writing.</p>\n<h3 class=\"pa\">Parameters</h3><ul><li><span class='pre'>file</span> : Object {File}<div class='sub-desc'><p>The file to open. Must be a file in the base directory.</p>\n</div></li></ul><h3 class='pa'>Returns</h3><ul><li><span class='pre'>Object {java.io.FileOutputStream}</span><div class='sub-desc'><p>An input stream for reading.</p>\n</div></li></ul><h3 class='pa'>Throws</h3><ul><li><span class='pre'>Object</span><div class='sub-desc'><p>IOException If an I/O error occurs.\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-closeWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-closeWrite\" class=\"docClass\">closeWrite</a>(FileOutputStream)</p>\n</div></li></ul></div></div></div><div id='method-startRead' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-startRead' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-startRead' class='name expandable'>startRead</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Starts reading this directory. ...</div><div class='long'><p>Starts reading this directory. After calling this method you should\n not make any changes to its contents.</p>\n<h3 class='pa'>Throws</h3><ul><li><span class='pre'>Object</span><div class='sub-desc'><p>IOException If an error occurs.\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-finishRead\" rel=\"com.android.internal.os.AtomicDirectory-method-finishRead\" class=\"docClass\">finishRead</a>()\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-startWrite\" class=\"docClass\">startWrite</a>()</p>\n</div></li></ul></div></div></div><div id='method-startWrite' class='member  not-inherited'><a href='#' class='side expandable'><span>&nbsp;</span></a><div class='title'><div class='meta'><span class='defined-in' rel='com.android.internal.os.AtomicDirectory'>com.android.internal.os.AtomicDirectory</span><br/><a href='source/AtomicDirectory.html#com-android-internal-os-AtomicDirectory-method-startWrite' target='_blank' class='view-source'>view source</a></div><a href='#!/api/com.android.internal.os.AtomicDirectory-method-startWrite' class='name expandable'>startWrite</a>( <span class='pre'></span> )<span class=\"signature\"></span></div><div class='description'><div class='short'>Starts editing this directory. ...</div><div class='long'><p>Starts editing this directory. After calling this method you should\n add content to the directory only via the APIs on this class. To open a\n file for writing in this directory you should use <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-openWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-openWrite\" class=\"docClass\">openWrite</a>(File)\n and to close the file <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-closeWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-closeWrite\" class=\"docClass\">closeWrite</a>(FileOutputStream). Once all\n content has been written and all files closed you should commit via a\n call to <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-finishWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-finishWrite\" class=\"docClass\">finishWrite</a>() or discard via a call to <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-failWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-failWrite\" class=\"docClass\">failWrite</a>().</p>\n<h3 class='pa'>Throws</h3><ul><li><span class='pre'>Object</span><div class='sub-desc'><p>IOException If an error occurs.\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-startRead\" rel=\"com.android.internal.os.AtomicDirectory-method-startRead\" class=\"docClass\">startRead</a>()\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-openWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-openWrite\" class=\"docClass\">openWrite</a>(File)\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-finishWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-finishWrite\" class=\"docClass\">finishWrite</a>()\n@see <a href=\"#!/api/com.android.internal.os.AtomicDirectory-method-failWrite\" rel=\"com.android.internal.os.AtomicDirectory-method-failWrite\" class=\"docClass\">failWrite</a>()</p>\n</div></li></ul></div></div></div></div></div></div></div>","meta":{}});